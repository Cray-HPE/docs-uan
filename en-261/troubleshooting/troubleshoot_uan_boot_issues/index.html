<!DOCTYPE html>
<html lang="en-261" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1690254278" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1690254278" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1690254278" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1690254278"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    
  </head>
  <body class="" data-url="/docs-uan/en-261/troubleshooting/troubleshoot_uan_boot_issues/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-261'>
<img src=/docs-uan/images/hpe_pri_wht_rev_rgb.png alt="HPE" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1690254278"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1690254278"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-261";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1690254278"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/installation_prereqs/">
          installation prereqs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare for UAN Product Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure the BMC for UANs with iLO
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure the BIOS of an HPE UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/">
        Configure the BIOS of a Gigabyte UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/install/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/install/">
          install
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/install/install_the_uan_product_stream/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/install/install_the_uan_product_stream/">
        Install or Upgrade UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/operations/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/operations/">
          operations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/basic_uan_configuration/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/basic_uan_configuration/">
        Basic UAN Configuration
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build a New UAN Image Using a COS Recipe
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/create_uan_boot_images/">
        Create UAN Boot Images
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/mount_a_new_file_system_on_an_uan/">
        Mount a New File System on a UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/configure_interfaces_on_uans/">
        Configure Interfaces on UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (PAM) on UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/boot_uans/">
        Boot UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/cve-2023-0461/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/cve-2023-0461/">
        Mitigation for CVE-2023-0461
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_packages/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_packages/">
        `UAN packages`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_shadow/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_shadow/">
        `UAN shadow`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_ldap/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_ldap/">
        `UAN LDAP`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_motd/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_motd/">
        `UAN motd`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_hardening/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_hardening/">
        `UAN hardening`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_interfaces/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_interfaces/">
        `UAN interfaces`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_ca_cert/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_ca_cert/">
        `UAN ca cert`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/uan_disk_config/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/uan_disk_config/">
        `UAN disk config`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/operations/csm_gpg_keys/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/operations/csm_gpg_keys/">
        `.gpg keys`
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/advanced/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/advanced/">
          advanced
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/advanced/customizing_uan_images_manually/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/advanced/customizing_uan_images_manually/">
        Customizing UAN Images Manually
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/advanced/enabling_can_chn/">
        Enabling the Customer Access Network (CAN) or the Customer High Speed Network (CHN)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/advanced/repurposing_compute_as_uan/">
        Repurposing a Compute Node as a UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/advanced/sles_image/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/advanced/sles_image/">
        Booting an Application Node with a SLES Image (Technical Preview)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/advanced/enabling_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/advanced/enabling_k3s/">
        Configuring a UAN for K3s (Technical Preview)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/upgrade/">
          upgrade
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/upgrade/notable_changes/">
        Notable Changes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/upgrade/upgrades/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/upgrade/upgrades/">
        Upgrades
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/troubleshooting/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-261/troubleshooting/">
          troubleshooting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item active">
        <a href="/docs-uan/en-261/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS and Network Configuration Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-261/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-261/test-plan/">
          test-plan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-261/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-261/test-plan/test-plan/">
        Test Plan for User Access Node (UAN) and Repurposed Compute Node as UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            
            Version: 
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-262" value="/docs-uan/en-262/troubleshooting/troubleshoot_uan_boot_issues/">2.6.2</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-261" value="/docs-uan/en-261/troubleshooting/troubleshoot_uan_boot_issues/" selected>2.6.1</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-2511" value="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_boot_issues/">2.5.11</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> </a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-261/'></a> > <a href='/docs-uan/en-261/troubleshooting/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#the-uan-boot-process">The UAN boot process</a></li>
    <li><a href="#pxe-issues">PXE Issues</a></li>
    <li><a href="#initrd-dracut-issues">Initrd (Dracut) Issues</a></li>
    <li><a href="#image-boot-issues">Image Boot Issues</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="troubleshoot-uan-boot-issues">Troubleshoot UAN Boot Issues</h1>
<h2 id="the-uan-boot-process">The UAN boot process</h2>
<p>BOS boots UANs. BOS uses session templates to define various parameters such as:</p>
<ul>
<li>Which nodes to boot</li>
<li>Which image to boot</li>
<li>Kernel parameters</li>
<li>Whether to perform post-boot configuration (Node Personalization) of the nodes by CFS.</li>
<li>Which CFS configuration to use if Node Personalization is enabled.</li>
</ul>
<p>UAN boots are performed in three phases:</p>
<ol>
<li>PXE booting an iPXE binary that will load the initrd of the UAN image that will boot.</li>
<li>Booting the initrd (dracut) image which configures the UAN for booting the UAN image. This process consists of two phases.
<ol>
<li>Configuring the UAN node to use the Content Projection Service (CPS) and Data Virtualization Service (DVS). These services manage the UAN image rootfs mounting and make that image available to the UAN nodes.</li>
<li>Mounting the rootfs</li>
</ol>
</li>
<li>Booting the UAN image rootfs.</li>
</ol>
<h2 id="pxe-issues">PXE Issues</h2>
<p>Most PXE boot failures are the result of misconfigured network switches and/or BIOS settings. The UAN must PXE boot over the Node Management Network (NMN) and the switches must be configured to allow connectivity to the NMN. The cable for the NMN must be connected to the first port of the OCP card on HPE DL325 and DL385 servers or to the first port of the built-in LAN-On-Motherboard (LOM) on Gigabyte servers. See &ldquo;Prepare for UAN Product Installation&rdquo; in the UAN Installation Guide for details on the switch and BIOS settings required to configure the UAN for PXE booting.</p>
<p>UANs may fail to boot when the BIOS EFITIME is too far away from the time on management nodes. If there are x509 certificate problems, check that the BIOS time is correct. See &ldquo;Configure the BIOS of an HPE UAN&rdquo; or &ldquo;Configure the BIOS of a Gigabyte UAN&rdquo; in the UAN Installation Guide for examples of checking settings in the BIOS.</p>
<h2 id="initrd-dracut-issues">Initrd (Dracut) Issues</h2>
<p>Dracut failures are often caused by the wrong interface being named <code>nmn0</code>, or to multiple entries for the UAN xname in DNS. The latter is a result of multiple interfaces making DHCP requests. Either condition can cause IP address mismatches in the <code>dvs_node_map</code>. DNS configures entries based on DHCP leases.</p>
<p>When dracut starts, it renames the network device named by the <code>ifmap=netX:nmn0</code> kernel parameter to <code>nmn0</code>. This interface is the only one dracut will enable DHCP on. The <code>ip=nmn0:dhcp</code> kernel parameter limits dracut to DHCP only <code>nmn0</code>. The ifmap value must be set correctly in the <code>kernel_parameters</code> field of the BOS session template.</p>
<p>See <a href="/docs-uan/en-261/operations/create_uan_boot_images/">Create UAN Boot Images</a> for details on how to configure the BOS session template. For UAN nodes that have more than one PCI card installed, <code>ifmap=net2:nmn0</code> is the correct setting. If only one PCI card is installed, <code>ifmap=net0:nmn0</code> is normally the correct setting.</p>
<p>UANs require CPS and DVS to boot from images. These services are configured in dracut to retrieve the rootfs and mount it. If the image fails to download, check that DVS and CPS are both healthy, and DVS is running on all worker nodes. Run the following commands to check DVS and CPS:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001#  kubectl get nodes -l cps-pm-node<span style="color:#f92672">=</span>True -o custom-columns<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;:metadata.name&#34;</span> --no-headers
</span></span><span style="display:flex;"><span>ncn-w001
</span></span><span style="display:flex;"><span>ncn-w002
</span></span><span style="display:flex;"><span>ncn-m001#  <span style="color:#66d9ef">for</span> node in <span style="color:#e6db74">`</span>kubectl get nodes -l cps-pm-node<span style="color:#f92672">=</span>True -o custom-columns<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;:metadata.name&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--no-headers<span style="color:#e6db74">`</span>; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>ssh $node <span style="color:#e6db74">&#34;lsmod | grep &#39;^dvs &#39;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>ncn-w001
</span></span><span style="display:flex;"><span>ncn-w002
</span></span></code></pre></div><p>If DVS and CPS are both healthy, then both of these commands will return all the worker NCNs in the HPE Cray EX system.</p>
<h2 id="image-boot-issues">Image Boot Issues</h2>
<p>Once dracut exits, the UAN will boot the <code>rootfs</code> image. Failures seen in this phase tend to be failures of <code>spire-agent</code>, <code>cfs-state-reporter</code>, or both. The <code>cfs-state-reporter</code> tells BOA that the node is ready and allows BOA to start CFS for Node Personalization. If <code>cfs-state-reporter</code> does not start, check if the <code>spire-agent</code> has started. The <code>cfs-state-reporter</code> depends on the <code>spire-agent</code>. Running systemctl status spire-agent will show that that service is enabled and running if there are no issues with that service. Similarly, running <code>systemctl status cfs-state-reporter</code> will show a status of SUCCESS.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>uan# systemctl status spire-agent
</span></span><span style="display:flex;"><span>● spire-agent.service - SPIRE Agent
</span></span><span style="display:flex;"><span>   Loaded: loaded <span style="color:#f92672">(</span>/usr/lib/systemd/system/spire-agent.service; enabled; vendor preset: enabled<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   Active: active <span style="color:#f92672">(</span>running<span style="color:#f92672">)</span> since Wed 2021-02-24 14:27:33 CST; 19h ago
</span></span><span style="display:flex;"><span> Main PID: <span style="color:#ae81ff">3581</span> <span style="color:#f92672">(</span>spire-agent<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    Tasks: <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span>   CGroup: /system.slice/spire-agent.service
</span></span><span style="display:flex;"><span>           └─3581 /usr/bin/spire-agent run -expandEnv -config /root/spire/conf/spire-agent.conf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>uan# systemctl status cfs-state-reporter
</span></span><span style="display:flex;"><span>● cfs-state-reporter.service - cfs-state-reporter reports configuration level of the system
</span></span><span style="display:flex;"><span>   Loaded: loaded <span style="color:#f92672">(</span>/usr/lib/systemd/system/cfs-state-reporter.service; enabled; vendor preset: enabled<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   Active: inactive <span style="color:#f92672">(</span>dead<span style="color:#f92672">)</span> since Wed 2021-02-24 14:29:51 CST; 19h ago
</span></span><span style="display:flex;"><span> Main PID: <span style="color:#ae81ff">3827</span> <span style="color:#f92672">(</span>code<span style="color:#f92672">=</span>exited, status<span style="color:#f92672">=</span>0/SUCCESS<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>There may be errors related to failing to load kernel modules during the boot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>FAILED Failed to start Load Kernel Modules.
</span></span><span style="display:flex;"><span>See <span style="color:#e6db74">&#39;systemctl status systemd-modules-load.service&#39;</span> <span style="color:#66d9ef">for</span> details.
</span></span></code></pre></div><p>Provided the UAN boots and completes post boot customizations, these messages may be ignored.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1690254278"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1690254278"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1690254278"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1690254278"></script>
    <script src="/docs-uan/js/featherlight.min.js?1690254278"></script>
    <script src="/docs-uan/js/highlight.pack.js?1690254278"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1690254278"></script>
    <script src="/docs-uan/js/learn.js?1690254278"></script>
    <script src="/docs-uan/js/hugo-learn.js?1690254278"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1690254278"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

