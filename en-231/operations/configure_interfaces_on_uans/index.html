<!DOCTYPE html>
<html lang="en-231" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.87.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title>Configure Interfaces On UANs :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1647306777" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1647306777" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-blue.css?1647306777" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1647306777"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs-uan/en-231/operations/configure_interfaces_on_uans/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-231'>
  User Access Nodes
</a>

    </div>

    
    <section>
      <ul>
      
        <li>
          <div class="select-style padding">
          v <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-231" value="/docs-uan/en-231/operations/configure_interfaces_on_uans/" selected>v2.3.1</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-230" value="/docs-uan/en-230/operations/configure_interfaces_on_uans/">v2.3.0</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-219" value="/docs-uan/en-219/operations/configure_interfaces_on_uans/">v2.1.9</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </li>
      

      
      </ul>
    </section>
  

    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1647306777"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1647306777"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-231";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1647306777"></script>

    
  </div>

  

    <div class="highlightable">
    <ul class="topics">
      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/advanced/" title="Advanced" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/advanced/customizing_uan_images_manually/" title="Customizing UAN Images Manually" class="dd-item ">
        <a href="/docs-uan/en-231/advanced/customizing_uan_images_manually/">
        Customizing UAN Images Manually
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
      <li data-nav-id="/docs-uan/en-231/changelog/" title="Changelog" class="dd-item ">
        <a href="/docs-uan/en-231/changelog/">
        Changelog
        
        </a>
    </li>
     
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/install/" title="Install" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/install/">
          Install
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/install/install_the_uan_product_stream/" title="Install The UAN Product Stream" class="dd-item ">
        <a href="/docs-uan/en-231/install/install_the_uan_product_stream/">
        Install The UAN Product Stream
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/installation_prereqs/" title="Installation Prereqs" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/installation_prereqs/">
          Installation Prereqs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/installation_prereqs/prepare_for_uan_product_installation/" title="Prepare For UAN Product Installation" class="dd-item ">
        <a href="/docs-uan/en-231/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare For UAN Product Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/" title="Configure The Bios Of A Gigabyte UAN" class="dd-item ">
        <a href="/docs-uan/en-231/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/">
        Configure The Bios Of A Gigabyte UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="Configure The Bios Of An HPE UAN" class="dd-item ">
        <a href="/docs-uan/en-231/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure The Bios Of An HPE UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="Configure The BMC For UANs With Ilo" class="dd-item ">
        <a href="/docs-uan/en-231/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure The BMC For UANs With Ilo
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/operations/" title="Operations" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-231/operations/">
          Operations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="Configure Pluggable Authentication Modules (pam) On UANs" class="dd-item ">
        <a href="/docs-uan/en-231/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (pam) On UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/create_uan_boot_images/" title="Create UAN Boot Images" class="dd-item ">
        <a href="/docs-uan/en-231/operations/create_uan_boot_images/">
        Create UAN Boot Images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/mount_a_new_file_system_on_an_uan/" title="Mount A New File System On A UAN" class="dd-item ">
        <a href="/docs-uan/en-231/operations/mount_a_new_file_system_on_an_uan/">
        Mount A New File System On A UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/uan_ansible_roles/" title="UAN Ansible Roles" class="dd-item ">
        <a href="/docs-uan/en-231/operations/uan_ansible_roles/">
        UAN Ansible Roles
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/about_uan_configuration/" title="About UAN Configuration" class="dd-item ">
        <a href="/docs-uan/en-231/operations/about_uan_configuration/">
        About UAN Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/boot_uans/" title="Boot UANs" class="dd-item ">
        <a href="/docs-uan/en-231/operations/boot_uans/">
        Boot UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/build_a_new_uan_image_using_the_cos_recipe/" title="Build A New UAN Image Using A Cos Recipe" class="dd-item ">
        <a href="/docs-uan/en-231/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build A New UAN Image Using A Cos Recipe
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/operations/configure_interfaces_on_uans/" title="Configure Interfaces On UANs" class="dd-item active">
        <a href="/docs-uan/en-231/operations/configure_interfaces_on_uans/">
        Configure Interfaces On UANs
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/test-plan/" title="Test-plan" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/test-plan/">
          Test-plan
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/test-plan/test-plan/" title="Test Plan For User Access Node (UAN)" class="dd-item ">
        <a href="/docs-uan/en-231/test-plan/test-plan/">
        Test Plan For User Access Node (UAN)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/troubleshooting/" title="Troubleshooting" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/troubleshooting/">
          Troubleshooting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="Troubleshoot UAN CFS And Network Configuration Issues" class="dd-item ">
        <a href="/docs-uan/en-231/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS And Network Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="Troubleshoot UAN Disk Configuration Issues" class="dd-item ">
        <a href="/docs-uan/en-231/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/troubleshooting/troubleshoot_uan_boot_issues/" title="Troubleshoot UAN Boot Issues" class="dd-item ">
        <a href="/docs-uan/en-231/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
    <li data-nav-id="/docs-uan/en-231/upgrade/" title="Upgrade" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-231/upgrade/">
          Upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/upgrade/merge_uan_configuration_data/" title="Merge UAN Configuration Data" class="dd-item ">
        <a href="/docs-uan/en-231/upgrade/merge_uan_configuration_data/">
        Merge UAN Configuration Data
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/upgrade/notable_changes/" title="Notable Changes" class="dd-item ">
        <a href="/docs-uan/en-231/upgrade/notable_changes/">
        Notable Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-231/upgrade/upgrades/" title="Upgrades" class="dd-item ">
        <a href="/docs-uan/en-231/upgrade/upgrades/">
        Upgrades
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
    </ul>

    
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-231/'>Cray Ex User Access Nodes Installation Guide</a> > <a href='/docs-uan/en-231/operations/'>Operations</a> > Configure Interfaces On UANs
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#configure-interfaces-on-uans">Configure Interfaces on UANs</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
            </h1>
          

        


<h2 id="configure-interfaces-on-uans">Configure Interfaces on UANs</h2>
<p>Perform this procedure to set network interfaces on UANs by editing a configuration file.</p>
<p>In the command examples in this procedure, <code>PRODUCT_VERSION</code> refers to the current installed version of the UAN product. Replace <code>PRODUCT_VERSION</code> with the UAN version number string when executing the commands.</p>
<p>The Customer Access Network (CAN) is no longer setup by default as the networking connection to the site user access network. The default is now for sites to directly connect their user network to the User Access Node (UAN) or Application nodes, and to define that network configuration in the Configuration Framework Service (CFS) <code>host_vars/XNAME/customer_net.yml</code> file.</p>
<p>Admins must create the <code>host_vars/XNAME/customer_net.yml</code> file and use the variables described in this procedure to define the interfaces and routes.</p>
<p>If the HPE Cray EX CAN is required, set <code>uan_can_setup : yes</code> in <code>host_vars/XNAME/customer_net.yml</code> for each node that will use the CAN, or in <code>group_vars/all/customer_net.yml</code> to enable the HPE Cray EX CAN on all UANs and Application nodes. The YAML files in <code>group_vars/all</code> define settings for every node in the system, whereas the YAML files in <code>host_vars/XNAME</code> define settings only for an individual node. Administrators can use either directory or both. When both YAML directories are used, the settings in <code>host_vars/XNAME</code> override the settings in <code>group_vars/all</code> files.</p>
<ol>
<li>
<p>Obtain the password for the <code>crayvcs</code> user.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-m001# kubectl get secret -n services vcs-user-credentials <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --template<span style="color:#f92672">={{</span>.data.vcs_password<span style="color:#f92672">}}</span> | base64 --decode
</code></pre></div></li>
<li>
<p>Log in to ncn-w001.</p>
</li>
<li>
<p>Create a copy of the Git configuration. Enter the credentials for the <code>crayvcs</code> user when prompted.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# git clone https://api-gw-service-nmn.local/vcs/cray/uan-config-management.git
</code></pre></div></li>
<li>
<p>Change to the <code>uan-config-management</code> directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# cd uan-config-management
</code></pre></div></li>
<li>
<p>Edit the <code>customer_net.yml</code> file in either the <code>host_vars/XNAME</code> or <code>group_vars/all</code> directory and configure the values as needed.</p>
<p>To set up CAN:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## uan_can_setup</span>
<span style="color:#75715e"># Set uan_can_setup to &#39;yes&#39; if the site will</span>
<span style="color:#75715e"># use the Shasta CAN network for user access to</span>
<span style="color:#75715e"># UAN/Application nodes.</span>
uan_can_setup: no
</code></pre></div><p>To define interfaces:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## Customer defined networks ifcfg-X</span>
<span style="color:#75715e"># customer_uan_interfaces is as list of interface names used for constructing</span>
<span style="color:#75715e"># ifcfg-&lt;customer_uan_interfaces.name&gt; files.  The setting dictionary is where</span>
<span style="color:#75715e"># any desired ifcfg fields are defined.  The field name will be converted to </span>
<span style="color:#75715e"># uppercase in the generated ifcfg-&lt;name&gt; file.</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># NOTE: Interfaces should be defined in order of dependency.</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e">## Example ifcfg fields, not exhaustive:</span>
<span style="color:#75715e">#  bootproto: &#39;&#39;</span>
<span style="color:#75715e">#  device: &#39;&#39;</span>
<span style="color:#75715e">#  dhcp_hostname: &#39;&#39;</span>
<span style="color:#75715e">#  ethtool_opts: &#39;&#39;</span>
<span style="color:#75715e">#  gateway: &#39;&#39;</span>
<span style="color:#75715e">#  hwaddr: &#39;&#39;</span>
<span style="color:#75715e">#  ipaddr: &#39;&#39;</span>
<span style="color:#75715e">#  master: &#39;&#39;</span>
<span style="color:#75715e">#  mtu: &#39;&#39;</span>
<span style="color:#75715e">#  peerdns: &#39;&#39;</span>
<span style="color:#75715e">#  prefixlen: &#39;&#39;</span>
<span style="color:#75715e">#  slave: &#39;&#39;</span>
<span style="color:#75715e">#  srcaddr: &#39;&#39;</span>
<span style="color:#75715e">#  startmode: &#39;&#39;</span>
<span style="color:#75715e">#  userctl: &#39;&#39;</span>
<span style="color:#75715e">#  bonding_master: &#39;&#39;</span>
<span style="color:#75715e">#  bonding_module_opts: &#39;&#39;</span>
<span style="color:#75715e">#  bonding_slave0: &#39;&#39;</span>
<span style="color:#75715e">#  bonding_slave1: &#39;&#39;</span>
<span style="color:#75715e"># </span>
<span style="color:#75715e"># customer_uan_interfaces:</span>
<span style="color:#75715e">#   - name: &#34;net1&#34;</span>
<span style="color:#75715e">#     settings:</span>
<span style="color:#75715e">#       bootproto: &#34;static&#34;</span>
<span style="color:#75715e">#       device: &#34;net1&#34;</span>
<span style="color:#75715e">#       ipaddr: &#34;1.2.3.4&#34;</span>
<span style="color:#75715e">#       startmode: &#34;auto&#34;</span>
<span style="color:#75715e">#   - name: &#34;net2&#34;</span>
<span style="color:#75715e">#     settings:</span>
<span style="color:#75715e">#       bootproto: &#34;static&#34;</span>
<span style="color:#75715e">#       device: &#34;net2&#34;</span>
<span style="color:#75715e">#       ipaddr: &#34;5.6.7.8&#34;</span>
<span style="color:#75715e">#       startmode: &#34;auto&#34;</span>
customer_uan_interfaces: <span style="color:#f92672">[]</span>

</code></pre></div><p>To define interface static routes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## Customer defined networks ifroute-X</span>
<span style="color:#75715e"># customer_uan_routes is as list of interface routes used for constructing</span>
<span style="color:#75715e"># ifroute-&lt;customer_uan_routes.name&gt; files.  </span>
<span style="color:#75715e"># </span>
<span style="color:#75715e"># customer_uan_routes:</span>
<span style="color:#75715e">#   - name: &#34;net1&#34;</span>
<span style="color:#75715e">#     routes:</span>
<span style="color:#75715e">#       - &#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
<span style="color:#75715e">#       - &#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
<span style="color:#75715e">#   - name: &#34;net2&#34;</span>
<span style="color:#75715e">#     routes:</span>
<span style="color:#75715e">#       - &#34;default 10.103.8.20 255.255.255.255 - table 3&#34;</span>
<span style="color:#75715e">#       - &#34;10.103.8.128/25 10.103.8.20 255.255.255.255 net2&#34;</span>
customer_uan_routes: <span style="color:#f92672">[]</span>
</code></pre></div><p>To define the rules:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## Customer defined networks ifrule-X</span>
<span style="color:#75715e"># customer_uan_rules is as list of interface rules used for constructing</span>
<span style="color:#75715e"># ifrule-&lt;customer_uan_routes.name&gt; files.  </span>
<span style="color:#75715e"># </span>
<span style="color:#75715e"># customer_uan_rules:</span>
<span style="color:#75715e">#   - name: &#34;net1&#34;</span>
<span style="color:#75715e">#     rules:</span>
<span style="color:#75715e">#       - &#34;from 10.1.0.0/16 lookup 1&#34;</span>
<span style="color:#75715e">#   - name: &#34;net2&#34;</span>
<span style="color:#75715e">#     rules:</span>
<span style="color:#75715e">#       - &#34;from 10.103.8.0/24 lookup 3&#34;</span>
customer_uan_rules: <span style="color:#f92672">[]</span>
</code></pre></div><p>To define the global static routes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## Customer defined networks global routes</span>
<span style="color:#75715e"># customer_uan_global_routes is as list of global routes used for constructing</span>
<span style="color:#75715e"># the &#34;routes&#34; file.  </span>
<span style="color:#75715e"># </span>
<span style="color:#75715e"># customer_uan_global_routes:</span>
<span style="color:#75715e">#   - routes: </span>
<span style="color:#75715e">#       - &#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
<span style="color:#75715e">#       - &#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
customer_uan_global_routes: <span style="color:#f92672">[]</span>
</code></pre></div></li>
<li>
<p>Add the change from the working directory to the staging area.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# git add -A
</code></pre></div></li>
<li>
<p>Commit the file to the master branch.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# git commit -am <span style="color:#e6db74">&#39;Added UAN interfaces&#39;</span>
</code></pre></div></li>
<li>
<p>Push the commit.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# git push
</code></pre></div></li>
<li>
<p>Obtain the commit ID for the commit pushed in the previous step.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-m001# git rev-parse --verify HEAD
</code></pre></div></li>
<li>
<p>Update any CFS configurations used by the UANs with the commit ID from the previous step.</p>
<p>a. Download the JSON of the current UAN CFS configuration to a file.</p>
<p>This file will be named <code>uan-config-PRODUCT_VERSION.json</code>. Replace <code>PRODUCT_VERSION</code> with the current installed UAN version.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">    ncn-m001#  cray cfs configurations describe uan-config-PRODUCT_VERSION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     --format<span style="color:#f92672">=</span>json &gt;uan-config-PRODUCT_VERSION.json
</code></pre></div><p>b. Remove the unneeded lines from the JSON file.</p>
<pre><code>The lines to remove are:

   - the `lastUpdated` line
   - the last `name` line 

These must be removed before uploading the modified JSON file back into CFS to update the UAN configuration.

```bash
ncn-m001# cat uan-config-PRODUCT_VERSION.json
{
  &quot;lastUpdated&quot;: &quot;2021-03-27T02:32:10Z&quot;,      
  &quot;layers&quot;: [
    {
      &quot;cloneUrl&quot;: &quot;https://api-gw-service-nmn.local/vcs/cray/uan-config-management.git&quot;,
      &quot;commit&quot;: &quot;aa5ce7d5975950ec02493d59efb89f6fc69d67f1&quot;,
      &quot;name&quot;: &quot;uan-integration-PRODUCT_VERSION&quot;,
      &quot;playbook&quot;: &quot;site.yml&quot;
    },
  &quot;name&quot;: &quot;uan-config-2.0.1-full&quot;            
} 
```
</code></pre>
<p>c. Replace the <code>commit</code> value in the JSON file with the commit ID obtained in the previous Step.</p>
<pre><code>The name value after the commit line may also be updated to match the new UAN product version, if desired. This is not necessary as CFS does not use this value for the configuration name.

```bash
{
 &quot;layers&quot;: [
 {
 &quot;cloneUrl&quot;: &quot;https://api-gw-service-nmn.local/vcs/cray/uan-configmanagement.git&quot;,
 &quot;commit&quot;: &quot;aa5ce7d5975950ec02493d59efb89f6fc69d67f1&quot;,
 &quot;name&quot;: &quot;uan-integration-PRODUCT_VERSION&quot;,
 &quot;playbook&quot;: &quot;site.yml&quot;
 }
 ]
}
```
</code></pre>
<p>d. Create a new UAN CFS configuration with the updated JSON file.</p>
<p>The following example uses <code>uan-config-PRODUCT_VERSION</code> for the name of the new CFS configuration, to match the JSON file name.</p>
<pre><code>```bash
ncn-m001# cray cfs configurations update uan-config-PRODUCT_VERSION \
 --file uan-config-PRODUCT_VERSION.json
```
</code></pre>
<p>e. Tell CFS to apply the new configuration to UANs by repeating the following command for each UAN. Replace <code>UAN_XNAME</code> in the command below with the name of a different UAN each time the command is run.</p>
<pre><code>```bash
ncn-m001# cray cfs components update --desired-config uan-config-PRODUCT_VERSION \
--enabled true --format json UAN_XNAME
```
</code></pre>
</li>
<li>
<p>Reboot the UAN with the Boot Orchestration Service (BOS).</p>
<p>The new interfaces will be available when the UAN is rebooted. Replace the <code>UAN_SESSION_TEMPLATE</code> value with the BOS session template name for the UANs.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ncn-w001# cray bos v1 session create <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --template-uuid UAN_SESSION_TEMPLATE --operation reboot
</code></pre></div></li>
<li>
<p>Verify that the desired networking configuration is correct on each UAN.</p>
</li>
</ol>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1647306777"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1647306777"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1647306777"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1647306777"></script>
    <script src="/docs-uan/js/featherlight.min.js?1647306777"></script>
    <script src="/docs-uan/js/highlight.pack.js?1647306777"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1647306777"></script>
    <script src="/docs-uan/js/learn.js?1647306777"></script>
    <script src="/docs-uan/js/hugo-learn.js?1647306777"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1647306777"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

