<!DOCTYPE html>
<html lang="en-255" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.87.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1670632904" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1670632904" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1670632904" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1670632904"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs-uan/operations/uan_ansible_roles/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs/uan/'>
   &lt;?xml version="1.0" encoding="utf-8"?>
   
   <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       viewBox="0 0 413.4 106.8" style="enable-background:new 0 0 413.4 106.8;" xml:space="preserve">
   <style type="text/css">
      .st0{fill:#ffffff;}
   </style>
   <g>
      <path class="st0" d="M149.5,65.6c-0.4-0.2-1-0.2-1.3,0.2c-3.5,4.1-8.5,5.5-13.2,3.5c-3.2-1.3-5.5-3.6-6.5-6.7
         c-1.1-3.1-0.8-6.8,0.8-10.7c3.1-7.7,9.7-11.1,16.3-8.4c4.6,1.9,7.2,5.9,7,11.1c0,0.5,0.3,0.9,0.8,1c0.5,0.1,1-0.2,1.1-0.6l7.7-19.9
         c0.2-0.4,0-0.9-0.3-1.1c-2.9-2.3-6.3-4.3-10-5.8c-8.8-3.6-17.4-4-24.8-1.2c-7.5,2.8-13.2,8.7-16.6,17c-3.4,8.3-3.4,16.5,0,23.8
         c3.3,7.3,9.8,13,18.6,16.6c4.2,1.7,8.4,2.7,12.4,2.9c0,0,0,0,0.1,0c0.4,0,0.8-0.3,0.9-0.6l7.7-19.8
         C150.1,66.4,149.9,65.8,149.5,65.6z"/>
      <path class="st0" d="M38,25.7c-7.3,0.1-13.4,3-17.6,8.3v-6.5c0-0.6-0.4-1-1-1H1c-0.6,0-1,0.4-1,1v57.4c0,0.6,0.4,1,1,1h18.4
         c0.6,0,1-0.4,1-1V55.5c0.9-7.7,7.8-12.1,17.5-11.2c0.3,0,0.6-0.1,0.8-0.3s0.3-0.5,0.3-0.7V26.7c0-0.3-0.1-0.5-0.3-0.7
         C38.6,25.8,38.3,25.7,38,25.7z"/>
      <path class="st0" d="M71.6,25.9c-18.5,0-30.9,12.3-30.9,30.5c0,18.3,12.3,30.2,31.4,30.2c10.6,0,19.5-3.6,25.8-10.4
         c0.4-0.4,0.3-1,0-1.4l-9.7-9.5c-0.4-0.4-1-0.4-1.4,0c-3.6,3.6-8.2,5.6-13,5.6c-6,0-10.2-3.1-12.2-8.6h39c0.5,0,1-0.4,1-0.9
         c0.7-11.5-2-20.8-7.8-27C88.6,28.7,81.1,25.9,71.6,25.9z M61.1,50.3c1.4-6,5.3-9.6,10.7-9.6c5.8,0,9.6,3.7,10,9.6H61.1z"/>
      <path class="st0" d="M223.2,25.9c-19.4,0-32.4,12.2-32.4,30.3c0,18.2,13,30.4,32.4,30.4c19.3,0,32.3-12.2,32.3-30.4
         C255.5,38.1,242.5,25.9,223.2,25.9z M223.2,70.3c-7.1,0-11.9-5.6-11.9-13.9c0-8.3,4.8-13.9,11.9-13.9c7,0,11.8,5.6,11.8,13.9
         C235,64.7,230.2,70.3,223.2,70.3z"/>
      <path class="st0" d="M315.8,71.4l-13.4-7.9c-0.2-0.1-0.5-0.2-0.8-0.1c-0.3,0.1-0.5,0.2-0.6,0.5c-2.2,4-5.9,6-10.8,6
         c-6.6,0-11-5.5-11-13.6c0-8.1,4.4-13.5,11-13.5c4.5,0,8.2,1.9,10.8,5.5c0.3,0.4,0.9,0.5,1.3,0.3l13.2-8c0.2-0.1,0.4-0.4,0.5-0.6
         c0.1-0.3,0-0.5-0.1-0.8c-5.2-8.5-14.8-13.4-26.4-13.4c-18.4,0-30.8,12.3-30.8,30.5c0,18,12.3,30.2,30.6,30.2c12.4,0,22-4.9,27-13.8
         C316.4,72.3,316.2,71.7,315.8,71.4z"/>
      <path class="st0" d="M370.1,0.4c-0.2-0.3-0.5-0.4-0.8-0.4h-19.6c-0.4,0-0.8,0.3-0.9,0.6l-32.9,85.8c-0.1,0.3-0.1,0.7,0.1,0.9
         s0.5,0.4,0.8,0.4h19.6c0.4,0,0.8-0.3,0.9-0.6l32.9-85.8C370.3,1.1,370.2,0.7,370.1,0.4z"/>
      <path class="st0" d="M200.9,0.4c-0.2-0.3-0.5-0.4-0.8-0.4h-19.6c-0.4,0-0.8,0.3-0.9,0.6l-32.9,85.8c-0.1,0.3-0.1,0.7,0.1,0.9
         c0.2,0.3,0.5,0.4,0.8,0.4h19.6c0.4,0,0.8-0.3,0.9-0.6L201,1.4C201.2,1.1,201.1,0.7,200.9,0.4z"/>
      <path class="st0" d="M413.2,26.4c-0.2-0.3-0.5-0.4-0.8-0.4h-18.3c-0.4,0-0.8,0.3-1,0.7L381.5,62l-13.1-35.4
         c-0.1-0.4-0.5-0.7-0.9-0.7H367c-0.4,0-0.8,0.3-0.9,0.6l-8.7,22.7c-0.1,0.2-0.1,0.5,0,0.7l14,33l-1.2,2.5c-1.3,2.7-3.3,4-6.2,4
         c-2.4,0-4.4-0.8-6.9-2.9c-0.2-0.2-0.5-0.3-0.8-0.2c-0.3,0-0.5,0.2-0.7,0.5l-7.7,12.6c-0.3,0.4-0.2,1,0.2,1.3
         c5.4,4.1,10.9,6.1,17.3,6.1c11.1,0,18.6-5.3,23.1-16.2l24.8-63.3C413.4,27,413.4,26.6,413.2,26.4z"/>
   </g>
   </svg>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1670632904"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1670632904"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1670632904"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/installation_prereqs/">
          Installation Prereqs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/" title="" class="dd-item ">
        <a href="/docs-uan/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/">
        Configure The Bios Of A Gigabyte UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure The Bios Of An HPE UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure The BMC For UANs With Ilo
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare For UAN Product Installation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/install/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/install/">
          Install
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/install/install_the_uan_product_stream/" title="" class="dd-item ">
        <a href="/docs-uan/install/install_the_uan_product_stream/">
        Install The UAN Product Stream
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/operations/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/operations/">
          Operations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/about_uan_configuration/" title="" class="dd-item ">
        <a href="/docs-uan/operations/about_uan_configuration/">
        About UAN Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/operations/boot_uans/">
        Boot UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build A New UAN Image Using A Cos Recipe
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/operations/configure_interfaces_on_uans/">
        Configure Interfaces On UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (pam) On UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/operations/create_uan_boot_images/">
        Create UAN Boot Images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/operations/mount_a_new_file_system_on_an_uan/">
        Mount A New File System On A UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/operations/uan_ansible_roles/" title="" class="dd-item active">
        <a href="/docs-uan/operations/uan_ansible_roles/">
        UAN Ansible Roles 
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/advanced/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/advanced/customizing_uan_images_manually/" title="" class="dd-item ">
        <a href="/docs-uan/advanced/customizing_uan_images_manually/">
        Customizing UAN Images Manually
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/advanced/enabling_can_chn/">
        Enabling The Customer Access Network (CAN) Or The Customer High Speed Network (chn)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/advanced/repurposing_compute_as_uan/">
        Repurposing A Compute Node As A UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/advanced/sles_image/" title="" class="dd-item ">
        <a href="/docs-uan/advanced/sles_image/">
        Booting An Application Node With A Sles Image (techNICal Preview)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/upgrade/">
          Upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/upgrade/merge_uan_configuration_data/" title="" class="dd-item ">
        <a href="/docs-uan/upgrade/merge_uan_configuration_data/">
        Merge UAN Configuration Data
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/upgrade/notable_changes/">
        Notable Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/upgrade/upgrade_uan_software_product/" title="" class="dd-item ">
        <a href="/docs-uan/upgrade/upgrade_uan_software_product/">
        Upgrade UAN Software Product
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/troubleshooting/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/troubleshooting/">
          Troubleshooting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item ">
        <a href="/docs-uan/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS And Network Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/test-plan/">
          Test-plan
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/test-plan/test-plan/">
        Test Plan For User Access Node (UAN) And Repurposed Compute Node As Uan
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/'></a> > <a href='/docs-uan/operations/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#uan_disk_config"><code>uan_disk_config</code></a>
      <ul>
        <li><a href="#requirements">Requirements</a></li>
        <li><a href="#role-variables">Role Variables</a></li>
        <li><a href="#dependencies">Dependencies</a></li>
        <li><a href="#example-playbook">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_interfaces"><code>uan_interfaces</code></a>
      <ul>
        <li><a href="#requirements-1">Requirements</a></li>
        <li><a href="#role-variables-1">Role Variables</a></li>
        <li><a href="#uan_can_setup"><code>uan_can_setup</code></a></li>
        <li><a href="#uan_customer_default_route"><code>uan_customer_default_route</code></a></li>
        <li><a href="#dependencies-1">Dependencies</a></li>
        <li><a href="#example-playbook-1">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_ldap"><code>uan_ldap</code></a>
      <ul>
        <li><a href="#requirements-2">Requirements</a></li>
        <li><a href="#role-variables-2">Role Variables</a></li>
        <li><a href="#dependencies-2">Dependencies</a></li>
        <li><a href="#example-playbook-2">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_motd">uan_motd</a>
      <ul>
        <li><a href="#requirements-3">Requirements</a></li>
        <li><a href="#role-variables-3">Role Variables</a></li>
        <li><a href="#dependencies-3">Dependencies</a></li>
        <li><a href="#example-playbook-3">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_packages">uan_packages</a>
      <ul>
        <li><a href="#requirements-4">Requirements</a></li>
        <li><a href="#role-variables-4">Role Variables</a></li>
        <li><a href="#dependencies-4">Dependencies</a></li>
        <li><a href="#example-playbook-4">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_shadow">uan_shadow</a>
      <ul>
        <li><a href="#requirements-5">Requirements</a></li>
        <li><a href="#role-variables-5">Role Variables</a></li>
        <li><a href="#dependencies-5">Dependencies</a></li>
        <li><a href="#example-playbook-5">Example Playbook</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="uan-ansible-roles">UAN Ansible Roles</h1>
<h2 id="uan_disk_config"><code>uan_disk_config</code></h2>
<p>The <code>uan_disk_config</code> role configures swap and scratch disk partitions on UAN
nodes.</p>
<h3 id="requirements">Requirements</h3>
<p>There must be disk devices found on the UAN node by the <code>device_filter</code> module
or this role will exit with failure. This condition can be ignored by setting
<code>uan_require_disk</code> to <code>false</code>. See variable definitions below.</p>
<p>See the <code>library/device_filter.py</code> file for more information on this module.</p>
<p>The device that is found will be unmounted if mounted and a swap partition will
be created on the first half of the disk, and a scratch partition on the second
half. ext4 filesystems are created on each partition.</p>
<h3 id="role-variables">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_require_disk</code></dt>
<dd>
<p>Boolean to determine if this role continues to setup disk if no disks were found
by the device filter. Set to <code>true</code> to exit with error when no disks are found.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_require_disk</span>: <span style="color:#66d9ef">false</span>
</code></pre></div></dd>
<dt><code>uan_device_name_filter</code></dt>
<dd>
<p>Regular expression of disk device name for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_device_name_filter</span>: <span style="color:#e6db74">&#34;^sd[a-f]$&#34;</span>
</code></pre></div></dd>
<dt><code>uan_device_host_filter</code></dt>
<dd>
<p>Regular expression of host for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_device_host_filter</span>: <span style="color:#ae81ff">&#34;</span>
</code></pre></div></dd>
<dt><code>uan_device_model_filter</code></dt>
<dd>
<p>Regular expression of device model for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_device_model_filter</span>: <span style="color:#ae81ff">&#34;</span>
</code></pre></div></dd>
<dt><code>uan_device_vendor_filter</code></dt>
<dd>
<p>Regular expression of disk vendor for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_device_vendor_filter</span>: <span style="color:#ae81ff">&#34;</span>
</code></pre></div></dd>
<dt><code>uan_device_size_filter</code></dt>
<dd>
<p>Regular expression of disk size for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_device_size_filter</span>: <span style="color:#e6db74">&#34;&lt;1TB&#34;</span>
</code></pre></div></dd>
<dt><code>uan_swap</code></dt>
<dd>
<p>Filesystem location to mount the swap partition.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_swap</span>: <span style="color:#e6db74">&#34;/swap&#34;</span>
</code></pre></div></dd>
<dt><code>uan_scratch</code></dt>
<dd>
<p>Filesystem location to mount the scratch partition.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_scratch</span>: <span style="color:#e6db74">&#34;/scratch&#34;</span>
</code></pre></div></dd>
<dt><code>swap_file</code></dt>
<dd>
<p>Name of the swapfile to create. Full path is <code>&lt;uan_swap&gt;/&lt;swapfile&gt;</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">swap_file</span>: <span style="color:#e6db74">&#34;swapfile&#34;</span>
</code></pre></div></dd>
<dt><code>swap_dd_command</code></dt>
<dd>
<p><code>dd</code> command to create the <code>swapfile</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">swap_dd_command</span>: <span style="color:#e6db74">&#34;/usr/bin/dd if=/dev/zero of={{ uan_swap }}/{{ swap_file }} bs=1GB count=10&#34;</span>
</code></pre></div></dd>
<dt><code>swap_swappiness</code></dt>
<dd>
<p>Value to set the swapiness in sysctl.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">swap_swappiness</span>: <span style="color:#e6db74">&#34;10&#34;</span>
</code></pre></div></dd>
</dl>
<h3 id="dependencies">Dependencies</h3>
<p><code>library/device_filter.py</code> is required to find eligible disk devices.</p>
<h3 id="example-playbook">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_disk_config }</span>
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_interfaces"><code>uan_interfaces</code></h2>
<p>The <code>uan_interfaces</code> role configures site/customer-defined network interfaces
and Shasta Customer Access Network (CAN) network interfaces on UAN nodes.</p>
<h3 id="requirements-1">Requirements</h3>
<p>None.</p>
<h3 id="role-variables-1">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<h3 id="uan_can_setup"><code>uan_can_setup</code></h3>
<p><code>uan_can_setup</code> is a boolean variable controlling the configuration of user
access to UAN nodes.  When true, user access is configured over either the
Customer Access Network (CAN) or Customer High Speed Network (CHN), depending on which is configured on the system.</p>
<p>When <code>uan_can_setup</code> is false, user access over the CAN or CHN is not configured
on the UAN nodes and no default route is configured.  The Admin must then specify
the default route in <code>customer_uan_routes</code>.</p>
<p>The default value of <code>uan_can_setup</code> is <code>no</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_can_setup</span>: <span style="color:#66d9ef">no</span>
</code></pre></div><h3 id="uan_customer_default_route"><code>uan_customer_default_route</code></h3>
<p><code>uan_customer_default_route</code> is a boolean variable that allows the default route
to be set by the <code>customer_uan_routes</code> data when <code>uan_can_setup</code> is true.</p>
<p>By default, no default route is setup unless <code>uan_can_setup</code> is true, which sets the default route to the CAN or CHN.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_customer_default_route</span>: <span style="color:#66d9ef">no</span>
</code></pre></div><dl>
<dt><code>sls_nmn_name</code></dt>
<dd>
<p><code>sls_nmn_name</code> is the Node Management Network name used by SLS.
This value should not be changed.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">sls_nmn_name</span>: <span style="color:#e6db74">&#34;NMN&#34;</span>
</code></pre></div></dd>
<dt><code>sls_nmn_svcs_name</code></dt>
<dd>
<p>is the Node Management Services Network name used by SLS.
This value should not be changed.</p>
</dd>
<dt><code>uan_required_dns_options</code></dt>
<dd>
<p><code>uan_required_dns_options</code> is a list of DNS options.  By default, <code>single-request</code> is set and must not be removed.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_required_dns_options</span>:
  - <span style="color:#e6db74">&#39;single-request&#39;</span>
</code></pre></div></dd>
<dt><code>customer_uan_interfaces</code></dt>
<dd>
<p><code>customer_uan_interfaces</code> is as list of interface names used for constructing <code>ifcfg-&lt;customer_uan_interfaces.name&gt;</code> files. Define ifcfg fields for each interface here. Field names are converted to uppercase in the generated <code>ifcfg-&lt;name&gt;</code> file(s).</p>
<p>Interfaces should be defined in order of dependency.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">customer_uan_interfaces</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
    <span style="color:#f92672">settings</span>:
      <span style="color:#f92672">bootproto</span>: <span style="color:#e6db74">&#34;static&#34;</span>
      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
      <span style="color:#f92672">ipaddr</span>: <span style="color:#e6db74">&#34;1.2.3.4&#34;</span>
      <span style="color:#f92672">startmode</span>: <span style="color:#e6db74">&#34;auto&#34;</span>
  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
    <span style="color:#f92672">settings</span>:
      <span style="color:#f92672">bootproto</span>: <span style="color:#e6db74">&#34;static&#34;</span>
      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
      <span style="color:#f92672">ipaddr</span>: <span style="color:#e6db74">&#34;5.6.7.8&#34;</span>
      <span style="color:#f92672">startmode</span>: <span style="color:#e6db74">&#34;auto&#34;</span>
</code></pre></div></dd>
<dt><code>customer_uan_routes</code></dt>
<dd>
<p><code>customer_uan_routes</code> is as list of interface routes used for constructing <code>ifroute-&lt;customer_uan_routes.name&gt;</code> files.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">customer_uan_routes</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
    <span style="color:#f92672">routes</span>:
      - <span style="color:#e6db74">&#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
      - <span style="color:#e6db74">&#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
    <span style="color:#f92672">routes</span>:
      - <span style="color:#e6db74">&#34;default 10.103.8.20 255.255.255.255 - table 3&#34;</span>
      - <span style="color:#e6db74">&#34;10.103.8.128/25 10.103.8.20 255.255.255.255 net2&#34;</span>
</code></pre></div></dd>
<dt><code>customer_uan_rules</code></dt>
<dd>
<p><code>customer_uan_rules</code> is as list of interface rules used for constructing <code>ifrule-&lt;customer_uan_routes.name&gt;</code> files.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">customer_uan_rules</span>:
    - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
      <span style="color:#f92672">rules</span>:
        - <span style="color:#e6db74">&#34;from 10.1.0.0/16 lookup 1&#34;</span>
    - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
      <span style="color:#f92672">rules</span>:
        - <span style="color:#e6db74">&#34;from 10.103.8.0/24 lookup 3&#34;</span>
</code></pre></div></dd>
<dt><code>customer_uan_global_routes</code></dt>
<dd>
<p><code>customer_uan_global_routes</code> is a list of global routes used for constructing
the &ldquo;routes&rdquo; file.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">customer_uan_global_routes</span>:
  - <span style="color:#f92672">routes</span>:
    - <span style="color:#e6db74">&#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
    - <span style="color:#e6db74">&#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
</code></pre></div></dd>
<dt><code>external_dns_searchlist</code></dt>
<dd>
<p><code>external_dns_searchlist</code> is a list of customer-configurable fields to be added to the <code>/etc/resolv.conf</code> DNS search list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">external_dns_searchlist</span>:
  - <span style="color:#e6db74">&#39;my.domain.com&#39;</span>
  - <span style="color:#e6db74">&#39;my.other.domain.com&#39;</span>
</code></pre></div></dd>
<dt><code>external_dns_servers</code></dt>
<dd>
<p><code>external_dns_servers</code> is a list of customer-configurable fields to be added to the <code>/etc/resolv.conf</code> DNS server list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">external_dns_servers</span>:
  - <span style="color:#e6db74">&#39;1.2.3.4&#39;</span>
  - <span style="color:#e6db74">&#39;5.6.7.8&#39;</span>
</code></pre></div></dd>
<dt><code>external_dns_options</code></dt>
<dd>
<p><code>external_dns_options</code> is a list of customer-configurable fields to be added
to the <code>/etc/resolv.conf</code> DNS options list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">external_dns_options</span>:
  - <span style="color:#e6db74">&#39;single-request&#39;</span>
</code></pre></div></dd>
<dt><code>uan_access_control</code></dt>
<dd>
<p><code>uan_access_control</code> is a boolean variable to control whether non-root access control is enabled.  Default is <code>no</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_access_control</span>: <span style="color:#66d9ef">no</span>
</code></pre></div></dd>
<dt><code>api_gateways</code></dt>
<dd>
<p><code>api_gateways</code> is a list of API gateway DNS names to block non-user access</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">api_gateways</span>:
  - <span style="color:#e6db74">&#34;api-gw-service&#34;</span>
  - <span style="color:#e6db74">&#34;api-gw-service.local&#34;</span>
  - <span style="color:#e6db74">&#34;api-gw-service-nmn.local&#34;</span>
  - <span style="color:#e6db74">&#34;kubeapi-vip&#34;</span>
</code></pre></div></dd>
<dt><code>api_gw_ports</code></dt>
<dd>
<p><code>api_gw_ports</code> is a list of gateway ports to protect.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">api_gw_ports</span>: <span style="color:#e6db74">&#34;80,443,8081,8888&#34;</span>
</code></pre></div></dd>
<dt><code>sls_url</code></dt>
<dd>
<p><code>sls_url</code> is the SLS URL.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">sls_url</span>: <span style="color:#e6db74">&#34;http://cray-sls&#34;</span>
</code></pre></div></dd>
</dl>
<h3 id="dependencies-1">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-1">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_interfaces }</span>
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_ldap"><code>uan_ldap</code></h2>
<p>The <code>uan_ldap</code> role configures LDAP and AD groups on UAN nodes.</p>
<h3 id="requirements-2">Requirements</h3>
<p>NSCD, pam-config, sssd.</p>
<h3 id="role-variables-2">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_ldap_setup</code></dt>
<dd>
<p>A boolean variable to selectively skip the setup of LDAP on nodes it would otherwise be configured due to <code>uan_ldap_config</code> being defined.  The default setting is to setup LDAP when <code>uan_ldap_config</code> is not empty.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_ldap_setup</span>: <span style="color:#66d9ef">yes</span>
</code></pre></div></dd>
<dt><code>uan_ldap_config</code></dt>
<dd>
<p>Configures LDAP domains and servers. If this list is empty, no LDAP configuration will be applied to the UAN targets and all role tasks will be skipped.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_ldap_config</span>:
  - <span style="color:#f92672">domain</span>: <span style="color:#e6db74">&#34;mydomain-ldaps&#34;</span>
    <span style="color:#f92672">search_base</span>: <span style="color:#e6db74">&#34;dc=...,dc=...&#34;</span>
    <span style="color:#f92672">servers</span>: [<span style="color:#e6db74">&#34;ldaps://123.123.123.1&#34;</span>, <span style="color:#e6db74">&#34;ldaps://213.312.123.132&#34;</span>]
    <span style="color:#f92672">chpass_uri</span>: [<span style="color:#e6db74">&#34;ldaps://123.123.123.1&#34;</span>]

  - <span style="color:#f92672">domain</span>: <span style="color:#e6db74">&#34;mydomain-ldap&#34;</span>
    <span style="color:#f92672">search_base</span>: <span style="color:#e6db74">&#34;dc=...,dc=...&#34;</span>
    <span style="color:#f92672">servers</span>: [<span style="color:#e6db74">&#34;ldap://123.123.123.1&#34;</span>, <span style="color:#e6db74">&#34;ldap://213.312.123.132&#34;</span>]
</code></pre></div></dd>
<dt><code>uan_ad_groups</code></dt>
<dd>
<p>Configures active directory groups on UAN nodes.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_ad_groups</span>:
  - { <span style="color:#f92672">name: admin_grp, origin</span>: <span style="color:#ae81ff">ALL }</span>
  - { <span style="color:#f92672">name: dev_users, origin</span>: <span style="color:#ae81ff">ALL }</span>
</code></pre></div></dd>
<dt><code>uan_pam_modules</code></dt>
<dd>
<p>Configures PAM modules on the UAN nodes in <code>/etc/pam.d</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_pam_modules</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;common-account&#34;</span>
    <span style="color:#f92672">lines</span>:
      - <span style="color:#e6db74">&#34;account required\tpam_access.so&#34;</span>
</code></pre></div></dd>
</dl>
<h3 id="dependencies-2">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-2">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_ldap }</span>
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_motd">uan_motd</h2>
<p>The <code>uan_motd</code> role appends text to the <code>/etc/motd</code> file.</p>
<h3 id="requirements-3">Requirements</h3>
<p>None.</p>
<h3 id="role-variables-3">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_motd_content</span>: []
</code></pre></div><dl>
<dt><code>uan_motd_content</code></dt>
<dd>
<p>Contains text to be added to the end of the <code>/etc/motd</code> file.</p>
</dd>
</dl>
<h3 id="dependencies-3">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-3">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role: uan_motd, uan_motd_content</span>: <span style="color:#e6db74">&#34;MOTD CONTENT&#34;</span> }
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_packages">uan_packages</h2>
<p>The <code>uan_packages</code> role installs additional RPMs on UANs using the Ansible
<code>zypper</code> module.</p>
<p>Packages that are required for UANs to function should be preferentially
installed during image customization and/or image creation.</p>
<p>Installing RPMs during post-boot node configuration can cause high system loads
on large systems.</p>
<p>This role will only run on SLES-based nodes.</p>
<h3 id="requirements-4">Requirements</h3>
<p>Zypper must be installed.</p>
<h3 id="role-variables-4">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_additional_sles15_packages</span>: []
</code></pre></div><dl>
<dt><code>uan_additional_sles15_packages</code></dt>
<dd>
<p>contains the list of RPM packages to install.</p>
</dd>
</dl>
<h3 id="dependencies-4">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-4">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role: uan_packages, uan_additional_sles15_packages</span>: [<span style="color:#e6db74">&#39;vim&#39;</span>] }
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_shadow">uan_shadow</h2>
<p>The <code>uan_shadow</code> role configures the root password on UAN nodes.</p>
<h3 id="requirements-5">Requirements</h3>
<p>The root password hash has to be installed in HashiCorp Vault at <code>secret/uan root_password</code>.</p>
<h3 id="role-variables-5">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_vault_url</code></dt>
<dd>
<p>The URL for the HashiCorp Vault</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_vault_url</span>: <span style="color:#e6db74">&#34;http://cray-vault.vault:8200&#34;</span>
</code></pre></div></dd>
<dt><code>uan_vault_role_file</code></dt>
<dd>
<p>The required Kubernetes role file for HashiCorp Vault access.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_vault_role_file</span>: <span style="color:#ae81ff">/var/run/secrets/kubernetes.io/serviceaccount/namespace</span>
</code></pre></div></dd>
<dt><code>uan_vault_jwt_file</code></dt>
<dd>
<p>The path to the required Kubernetes token file for HashiCorp Vault access.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_vault_jwt_file</span>: <span style="color:#ae81ff">/var/run/secrets/kubernetes.io/serviceaccount/token</span>
</code></pre></div></dd>
<dt><code>uan_vault_path</code></dt>
<dd>
<p>The path to use for storing data for UANs in HashiCorp Vault.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_vault_path</span>: <span style="color:#ae81ff">secret/uan</span>
</code></pre></div></dd>
<dt><code>uan_vault_key</code></dt>
<dd>
<p>The key used for storing the root password in HashiCorp Vault.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">uan_vault_key</span>: <span style="color:#ae81ff">root_password</span>
</code></pre></div></dd>
</dl>
<h3 id="dependencies-5">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-5">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
  <span style="color:#f92672">roles</span>:
      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_shadow }</span>
</code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1670632904"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1670632904"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1670632904"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1670632904"></script>
    <script src="/docs-uan/js/featherlight.min.js?1670632904"></script>
    <script src="/docs-uan/js/highlight.pack.js?1670632904"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1670632904"></script>
    <script src="/docs-uan/js/learn.js?1670632904"></script>
    <script src="/docs-uan/js/hugo-learn.js?1670632904"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1670632904"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

