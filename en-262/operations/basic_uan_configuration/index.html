<!DOCTYPE html>
<html lang="en-262" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1708021505" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1708021505" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1708021505" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1708021505"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    
  </head>
  <body class="" data-url="/docs-uan/en-262/operations/basic_uan_configuration/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-262'>
<img src=/docs-uan/images/hpe_pri_wht_rev_rgb.png alt="HPE" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1708021505"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1708021505"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-262";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1708021505"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/installation_prereqs/">
          installation prereqs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare for UAN Product Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure the BMC for UANs with iLO
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure the BIOS of an HPE UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/install/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/install/">
          install
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/install/install_the_uan_product_stream/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/install/install_the_uan_product_stream/">
        Install or Upgrade UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/operations/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-262/operations/">
          operations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/basic_uan_configuration/" title="" class="dd-item active">
        <a href="/docs-uan/en-262/operations/basic_uan_configuration/">
        Basic UAN Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build a New UAN Image Using a COS Recipe
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/create_uan_boot_images/">
        Create UAN Boot Images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/mount_a_new_file_system_on_an_uan/">
        Mount a New File System on a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/configure_interfaces_on_uans/">
        Configure Interfaces on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (PAM) on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/boot_uans/">
        Boot UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/cve-2023-0461/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/cve-2023-0461/">
        Mitigation for CVE-2023-0461
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_shadow/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_shadow/">
        `UAN shadow`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_motd/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_motd/">
        `UAN motd`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_packages/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_packages/">
        `UAN packages`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_interfaces/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_interfaces/">
        `UAN interfaces`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_ldap/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_ldap/">
        `UAN LDAP`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_disk_config/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_disk_config/">
        `UAN disk config`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_gpg_keys/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_gpg_keys/">
        `UAN gpg keys`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_hardening/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_hardening/">
        `UAN hardening`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/operations/uan_ca_cert/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/operations/uan_ca_cert/">
        `UAN ca cert`
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/advanced/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/advanced/">
          advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/advanced/enabling_can_chn/">
        Enabling the Customer Access Network (CAN) or the Customer High Speed Network (CHN)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/advanced/repurposing_compute_as_uan/">
        Repurposing a Compute Node as a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/advanced/sles_image/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/advanced/sles_image/">
        Booting an Application Node with a SLES Image (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/advanced/enabling_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/advanced/enabling_k3s/">
        Configuring a UAN for K3s (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/upgrade/">
          upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/upgrade/notable_changes/">
        Notable Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/upgrade/upgrades/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/upgrade/upgrades/">
        Upgrades
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/troubleshooting/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/troubleshooting/">
          troubleshooting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS and Network Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-262/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-262/test-plan/">
          test-plan
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-262/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-262/test-plan/test-plan/">
        Test Plan for User Access Node (UAN) and Repurposed Compute Node as UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            
            Version: 
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-271" value="/docs-uan/en-271/operations/basic_uan_configuration/">2.7.1</option>
                    
                  
              
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-270" value="/docs-uan/en-270/operations/basic_uan_configuration/">2.7.0</option>
                    
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-262" value="/docs-uan/en-262/operations/basic_uan_configuration/" selected>2.6.2</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-261" value="/docs-uan/en-261/operations/basic_uan_configuration/">2.6.1</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-262/'></a> > <a href='/docs-uan/en-262/operations/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#uan-configuration-overview">UAN configuration overview</a></li>
    <li><a href="#required-cfs-layers-for-uan-configuration">Required CFS Layers for UAN Configuration</a>
      <ul>
        <li><a href="#slingshot-host-software-playbook-shs_defaultnetwork_type_installyml">Slingshot Host Software (playbook: shs_{{default.network_type}}_install.yml)</a></li>
        <li><a href="#cos-playbook-cos-applicationyml">COS (playbook: cos-application.yml)</a></li>
        <li><a href="#cms-layer-playbook-csm_packagesyml">CMS Layer (playbook: csm_packages.yml)</a></li>
        <li><a href="#optional-uan-layer-playbook-set_nologinyml">Optional UAN Layer (playbook: set_nologin.yml)</a></li>
        <li><a href="#uan-layer-playbook-siteyml">UAN Layer (playbook: site.yml)</a></li>
        <li><a href="#cos-playbook-cos-application-afteryml">COS (playbook: cos-application-after.yml)</a></li>
        <li><a href="#optional-uan-layer-playbook-unset_nologinyml">Optional UAN Layer (playbook: unset_nologin.yml)</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="basic-uan-configuration">Basic UAN Configuration</h1>
<h2 id="uan-configuration-overview">UAN configuration overview</h2>
<p>Configuration of UAN nodes is performed by the Configuration Framework Service (CFS). CFS can apply configuration to both images and nodes. When the configuration is applied to nodes, the nodes must be booted and accessible through SSH over the Node Management Network (NMN).</p>
<p>The preferred method of creating CFS configurations is to use the Shasta Admin Toolkit (SAT) <code>sat bootprep</code> command.  This command automates the creation of IMS images, CFS configurations, and BOS session templates. See <a href="/docs-uan/en-262/operations/create_uan_boot_images/">Create UAN Boot Images</a> for more details.</p>
<p>CFS uses configuration layers. Configuration layers allow the sharing of Ansible roles provided by other products, and by the site.  Non-root user access may be blocked during node configuration by enabling the <code>uan-set-nologin</code> and <code>uan-unset-nologin</code> configuration layers shown in the example bootprep file below. The parameterized fields are defined in a <code>products_vars.yml</code> file.</p>
<p><strong>IMPORTANT</strong> Do not remove or reorder the first three layers. The UAN product requires these layers and this specific order. Also, keep the required <code>cos-application-last</code> layer, is as the last or second to last layer in the configuration if <code>uan-set-nologin</code> and <code>uan-unset-nologin</code> are active.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>- name: <span style="color:#e6db74">&#34;{{default.note}}uan-{{recipe.version}}{{default.suffix}}&#34;</span>
</span></span><span style="display:flex;"><span>  layers:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># The first three layers are required and must not be reordered.</span>
</span></span><span style="display:flex;"><span>  - name: shs-<span style="color:#f92672">{{</span>default.network_type<span style="color:#f92672">}}</span>_install-<span style="color:#f92672">{{</span>slingshot_host_software.working_branch<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: shs_<span style="color:#f92672">{{</span>default.network_type<span style="color:#f92672">}}</span>_install.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: slingshot-host-software
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{slingshot_host_software.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{slingshot_host_software.working_branch}}&#34;</span>
</span></span><span style="display:flex;"><span>  - name: cos-application-<span style="color:#f92672">{{</span>cos.working_branch<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: cos-application.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: cos
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{cos.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{cos.working_branch}}&#34;</span>
</span></span><span style="display:flex;"><span>  - name: csm-packages-<span style="color:#f92672">{{</span>csm.version<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: csm_packages.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: csm
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{csm.version}}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Optional layer to prevent non-root logins during configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  - name: uan-set-nologin-{{uan.working_branch}}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    playbook: set_nologin.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    product:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      name: uan</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      version: &#34;{{uan.version}}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      branch: &#34;{{uan.working_branch}}&#34;</span>
</span></span><span style="display:flex;"><span>  - name: uan-<span style="color:#f92672">{{</span>uan.working_branch<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: site.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: uan
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{uan.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{uan.working_branch}}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### additional CFS layers here... </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># cos-application-last is required to be the last or second to last layer</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># when uan-set-nologin and uan-unset-nologin layers are active.</span>
</span></span><span style="display:flex;"><span>  - name: cos-application-last-<span style="color:#f92672">{{</span>cos.working_branch<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: cos-application-after.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: cos
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{cos.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{cos.working_branch}}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Optional layer to allow non-root logins after configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  - name: uan-unset-nologin-{{uan.working_branch}}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    playbook: unset_nologin.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    product:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      name: uan</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      version: &#34;{{uan.version}}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      branch: &#34;{{uan.working_branch}}&#34;</span>
</span></span></code></pre></div><h2 id="required-cfs-layers-for-uan-configuration">Required CFS Layers for UAN Configuration</h2>
<h3 id="slingshot-host-software-playbook-shs_defaultnetwork_type_installyml">Slingshot Host Software (playbook: shs_{{default.network_type}}_install.yml)</h3>
<p>The first CFS Layer installs the Slingshot Host Software for the Slingshot network type of the system.  The <code>default.network_type</code> is:</p>
<ul>
<li><code>mellanox</code> for ConnectX-5 NICs used in Slingshot 10</li>
<li><code>cassini</code> for Slingshot NICs in Slingshot 11</li>
</ul>
<p>The name of the playbook must match the name of the HSN NICs (mellanox or cassini) in the UAN nodes.  Additionally, the HSN NICs must be of the same type as the NCN and Compute nodes.</p>
<h3 id="cos-playbook-cos-applicationyml">COS (playbook: cos-application.yml)</h3>
<p>The second CFS Layer runs the following roles from the <code>cos-config-management</code> VCS repository. Any configuration changes needed for these roles must be made in the <code>cos-config-management</code> <code>group_vars</code> or <code>host_vars</code> subdirectories of that repository.</p>
<p>The following Ansible roles are run during UAN image configuration:</p>
<ul>
<li>
<p><strong>Standard UNIX configuration</strong></p>
<ul>
<li><code>cos-config-map</code></li>
<li><code>rsyslog</code></li>
<li><code>localtime</code></li>
<li><code>ntp</code></li>
<li><code>limits</code></li>
<li><code>kdump</code></li>
</ul>
</li>
<li>
<p><strong>Allow trust of CSM generated keys for elective passwordless SSH during image customization</strong></p>
<ul>
<li><code>trust-csm-ssh-keys</code></li>
</ul>
</li>
<li>
<p><strong>HPE Cray EX system configurations</strong></p>
<ul>
<li><code>overlay-preload</code></li>
</ul>
</li>
<li>
<p><strong>Install COS rpms</strong></p>
<ul>
<li><code>cos-services-install</code></li>
</ul>
</li>
<li>
<p>**DVS/LNET/FS</p>
<ul>
<li><code>cray_lnet_install</code></li>
<li><code>cray_dvs_install</code></li>
<li><code>cray_lnet_load</code></li>
<li><code>cray_dvs_load</code></li>
</ul>
</li>
</ul>
<p>The following Ansible roles are run during UAN post-boot configuration:</p>
<ul>
<li>
<p><strong>Standard UNIX configuration</strong></p>
<ul>
<li><code>rsyslog</code></li>
</ul>
</li>
<li>
<p><strong>HPE Cray EX system configurations</strong></p>
<ul>
<li><code>ca-cert</code></li>
<li><code>overlay-preload</code></li>
</ul>
</li>
<li>
<p><strong>GPU deploy support</strong></p>
<ul>
<li><code>cray_gpu_deploy</code></li>
</ul>
</li>
</ul>
<h3 id="cms-layer-playbook-csm_packagesyml">CMS Layer (playbook: csm_packages.yml)</h3>
<p>The third CFS Layer installs the the Cray Management System packages. These are normally not modified.</p>
<h3 id="optional-uan-layer-playbook-set_nologinyml">Optional UAN Layer (playbook: set_nologin.yml)</h3>
<p>This optional layer is recommended when the nodes will host non-root users. The layer touches the <code>/etc/nologin</code> file preventing non-root users from logging into the node while it is being configured. Be sure to include the optional UAN layer which calls the <code>unset_nologin.yml</code> playbook as indicated in this document if non-root users are to be allowed to login after the node is configured.</p>
<h3 id="uan-layer-playbook-siteyml">UAN Layer (playbook: site.yml)</h3>
<p>The Ansible roles involved in the UAN layer of the configuration are listed in the site.yml file in the uan-config-management git repository in VCS. Most of the roles that are specific to image configuration are required for the operation as a UAN and must not be removed from site.yml.</p>
<p>The UAN-specific roles involved in post-boot UAN node configuration are:</p>
<ul>
<li>
<p><a href="/docs-uan/en-262/operations/uan_disk_config/"><code>uan_disk_config</code></a>: this role configures the last disk found on the UAN that is smaller than 1TB, by default. That disk will be formatted with a scratch and swap partition mounted at /scratch and /swap, respectively. Each partition is 50% of the disk.</p>
</li>
<li>
<p><a href="/docs-uan/en-262/operations/uan_packages/"><code>uan_packages</code></a>: this role installs any RPM packages listed in the uan-config-management repo.</p>
</li>
<li>
<p><a href="/docs-uan/en-262/operations/uan_interfaces/"><code>uan_interfaces</code></a>: this role configures the UAN node networking. By default, this role does not configure a default route or the Customer Access Network (CAN or CHN) connection for the HPE Cray EX supercomputer. If CAN or CHN is enabled, the default route will be on the CAN or CHN. Otherwise, a default route must be set up in the customer interfaces definitions. Without the CAN or CHN, there will not be an external connection to the customer site network unless one is defined in the customer interfaces. See <a href="/docs-uan/en-262/operations/configure_interfaces_on_uans/">Configure Interfaces on UANs</a>.</p>
<p><em><strong>NOTE:</strong></em> If a UAN layer is used in the Compute node CFS configuration, the <code>uan_interfaces</code> role will configure the default route on Compute nodes to be on the HSN, if the BICAN System Default Route is set to <code>CHN</code>.</p>
</li>
<li>
<p><a href="/docs-uan/en-262/operations/uan_motd/"><code>uan_motd</code></a>: this role Provides a default message of the day that can be customized by the administrator.</p>
</li>
<li>
<p><a href="/docs-uan/en-262/operations/uan_ldap/"><code>uan_ldap</code></a>: this optional role configures the connection to LDAP servers. To disable this role, the administrator must set &lsquo;uan_ldap_setup:no&rsquo; in the &lsquo;uan-config-management&rsquo; VCS repository.</p>
</li>
<li>
<p><a href="/docs-uan/en-262/operations/uan_hardening/"><code>uan_hardening</code></a>: This role configures site/customer-defined network security of UANs, for example, preventing ssh out of the UAN over the NMN to NCN nodes.</p>
</li>
</ul>
<p>The UAN roles in <code>site.yml</code> are required and must not be removed, with exception of <code>uan_ldap</code> if the site is using some other method of user authentication. The <code>uan_ldap</code> may also be skipped by setting the value of <code>uan_ldap_setup</code> to <code>no</code> in a <code>group_vars</code> or <code>host_vars</code> configuration file.  Configuration of this layer is made in the <code>uan-config-management</code> VCS repository.</p>
<h3 id="cos-playbook-cos-application-afteryml">COS (playbook: cos-application-after.yml)</h3>
<p>This CFS Layer runs the following roles from the <code>cos-config-management</code> VCS repository. Any configuration changes needed for these roles must be made in the <code>group_vars</code> or <code>host_vars</code> subdirectories of that repository.</p>
<p>The following Ansible roles are run during UAN image configuration:</p>
<ul>
<li><code>rebuilt-initrd</code></li>
</ul>
<p>The following Ansible roles are run during UAN post-boot configuration:</p>
<ul>
<li><code>configure_fs</code></li>
</ul>
<h3 id="optional-uan-layer-playbook-unset_nologinyml">Optional UAN Layer (playbook: unset_nologin.yml)</h3>
<p>This UAN layer deletes the <code>/etc/nologin</code> file allowing non-root users to log into the UAN.  If the optional UAN layer that runs <code>set_nologin.yml</code> was used, this layer must be used or only the root user will have acces to the node.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1708021505"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1708021505"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1708021505"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1708021505"></script>
    <script src="/docs-uan/js/featherlight.min.js?1708021505"></script>
    <script src="/docs-uan/js/highlight.pack.js?1708021505"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1708021505"></script>
    <script src="/docs-uan/js/learn.js?1708021505"></script>
    <script src="/docs-uan/js/hugo-learn.js?1708021505"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1708021505"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

