<!DOCTYPE html>
<html lang="en-2511" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1691204688" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1691204688" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1691204688" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1691204688"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    
  </head>
  <body class="" data-url="/docs-uan/en-2511/operations/uan_ansible_roles/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-2511'>
<img src=/docs-uan/images/hpe_pri_wht_rev_rgb.png alt="HPE" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1691204688"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1691204688"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-2511";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1691204688"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/installation_prereqs/">
          installation prereqs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare for UAN Product Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure the BMC for UANs with iLO
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure the BIOS of an HPE UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/installation_prereqs/configure_the_bios_of_a_gigabyte_uan/">
        Configure the BIOS of a Gigabyte UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/install/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/install/">
          install
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/install/install_the_uan_product_stream/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/install/install_the_uan_product_stream/">
        Install the UAN Product Stream
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/operations/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-2511/operations/">
          operations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/about_uan_configuration/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/about_uan_configuration/">
        About UAN Configuration
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build a New UAN Image Using a COS Recipe
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/create_uan_boot_images/">
        Create UAN Boot Images
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/mount_a_new_file_system_on_an_uan/">
        Mount a New File System on a UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/configure_interfaces_on_uans/">
        Configure Interfaces on UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (PAM) on UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/uan_ansible_roles/" title="" class="dd-item active">
        <a href="/docs-uan/en-2511/operations/uan_ansible_roles/">
        UAN Ansible Roles
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/boot_uans/">
        Boot UANs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/operations/cve_2023_0461/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/operations/cve_2023_0461/">
        Mitigation for CVE-2023-0461
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/advanced/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/advanced/">
          advanced
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/advanced/customizing_uan_images_manually/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/advanced/customizing_uan_images_manually/">
        Customizing UAN Images Manually
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/advanced/enabling_can_chn/">
        Enabling the Customer Access Network (CAN) or the Customer High Speed Network (CHN)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/advanced/repurposing_compute_as_uan/">
        Repurposing a Compute Node as a UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/advanced/sles_image/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/advanced/sles_image/">
        Booting an Application Node with a SLES Image (Technical Preview)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/advanced/enabling_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/advanced/enabling_k3s/">
        Configuring a UAN for K3s (Technical Preview)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/upgrade/">
          upgrade
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/upgrade/notable_changes/">
        Notable Changes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/upgrade/upgrade_uan_software_product/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/upgrade/upgrade_uan_software_product/">
        Upgrade UAN Software Product
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/upgrade/merge_uan_configuration_data/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/upgrade/merge_uan_configuration_data/">
        Merge UAN Configuration Data
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/troubleshooting/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/troubleshooting/">
          troubleshooting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS and Network Configuration Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-2511/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-2511/test-plan/">
          test-plan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/test-plan/test-plan/">
        Test Plan for User Access Node (UAN) and Repurposed Compute Node as UAN
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-2511/test-plan/k3s_test_plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-2511/test-plan/k3s_test_plan/">
        Test Plan for UAIs on UANs (K3s Verification)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            
            Version: 
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-2511" value="/docs-uan/en-2511/operations/uan_ansible_roles/" selected>2.5.11</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> </a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-2511/'></a> > <a href='/docs-uan/en-2511/operations/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#uan_disk_config"><code>uan_disk_config</code></a>
      <ul>
        <li><a href="#requirements">Requirements</a></li>
        <li><a href="#role-variables">Role Variables</a></li>
        <li><a href="#dependencies">Dependencies</a></li>
        <li><a href="#example-playbook">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_interfaces"><code>uan_interfaces</code></a>
      <ul>
        <li><a href="#requirements-1">Requirements</a></li>
        <li><a href="#role-variables-1">Role Variables</a></li>
        <li><a href="#dependencies-1">Dependencies</a></li>
        <li><a href="#example-playbook-1">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_ldap"><code>uan_ldap</code></a>
      <ul>
        <li><a href="#requirements-2">Requirements</a></li>
        <li><a href="#role-variables-2">Role Variables</a></li>
        <li><a href="#dependencies-2">Dependencies</a></li>
        <li><a href="#example-playbook-2">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_motd">uan_motd</a>
      <ul>
        <li><a href="#requirements-3">Requirements</a></li>
        <li><a href="#role-variables-3">Role Variables</a></li>
        <li><a href="#dependencies-3">Dependencies</a></li>
        <li><a href="#example-playbook-3">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_packages">uan_packages</a>
      <ul>
        <li><a href="#requirements-4">Requirements</a></li>
        <li><a href="#role-variables-4">Role Variables</a></li>
        <li><a href="#dependencies-4">Dependencies</a></li>
        <li><a href="#example-playbook-4">Example Playbook</a></li>
      </ul>
    </li>
    <li><a href="#uan_shadow">uan_shadow</a>
      <ul>
        <li><a href="#requirements-5">Requirements</a></li>
        <li><a href="#role-variables-5">Role Variables</a></li>
        <li><a href="#dependencies-5">Dependencies</a></li>
        <li><a href="#example-playbook-5">Example Playbook</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="uan-ansible-roles">UAN Ansible Roles</h1>
<h2 id="uan_disk_config"><code>uan_disk_config</code></h2>
<p>The <code>uan_disk_config</code> role configures swap and scratch disk partitions on UAN
nodes.</p>
<h3 id="requirements">Requirements</h3>
<p>There must be disk devices found on the UAN node by the <code>device_filter</code> module
or this role will exit with failure. This condition can be ignored by setting
<code>uan_require_disk</code> to <code>false</code>. See variable definitions below.</p>
<p>See the <code>library/device_filter.py</code> file for more information on this module.</p>
<p>The device that is found will be unmounted if mounted and a swap partition will
be created on the first half of the disk, and a scratch partition on the second
half. ext4 filesystems are created on each partition.</p>
<h3 id="role-variables">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_require_disk</code></dt>
<dd>
<p>Boolean to determine if this role continues to setup disk if no disks were found
by the device filter. Set to <code>true</code> to exit with error when no disks are found.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_require_disk</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></dd>
<dt><code>uan_device_name_filter</code></dt>
<dd>
<p>Regular expression of disk device name for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_device_name_filter</span>: <span style="color:#e6db74">&#34;^sd[a-f]$&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_device_host_filter</code></dt>
<dd>
<p>Regular expression of host for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_device_host_filter</span>: <span style="color:#ae81ff">&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_device_model_filter</code></dt>
<dd>
<p>Regular expression of device model for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_device_model_filter</span>: <span style="color:#ae81ff">&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_device_vendor_filter</code></dt>
<dd>
<p>Regular expression of disk vendor for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_device_vendor_filter</span>: <span style="color:#ae81ff">&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_device_size_filter</code></dt>
<dd>
<p>Regular expression of disk size for this role to filter.
Input to the <code>device_filter</code> module.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_device_size_filter</span>: <span style="color:#e6db74">&#34;&lt;1TB&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_swap</code></dt>
<dd>
<p>Filesystem location to mount the swap partition.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_swap</span>: <span style="color:#e6db74">&#34;/swap&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_scratch</code></dt>
<dd>
<p>Filesystem location to mount the scratch partition.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_scratch</span>: <span style="color:#e6db74">&#34;/scratch&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>swap_file</code></dt>
<dd>
<p>Name of the swapfile to create. Full path is <code>&lt;uan_swap&gt;/&lt;swapfile&gt;</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">swap_file</span>: <span style="color:#e6db74">&#34;swapfile&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>swap_dd_command</code></dt>
<dd>
<p><code>dd</code> command to create the <code>swapfile</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">swap_dd_command</span>: <span style="color:#e6db74">&#34;/usr/bin/dd if=/dev/zero of={{ uan_swap }}/{{ swap_file }} bs=1GB count=10&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>swap_swappiness</code></dt>
<dd>
<p>Value to set the swapiness in sysctl.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">swap_swappiness</span>: <span style="color:#e6db74">&#34;10&#34;</span>
</span></span></code></pre></div></dd>
</dl>
<h3 id="dependencies">Dependencies</h3>
<p><code>library/device_filter.py</code> is required to find eligible disk devices.</p>
<h3 id="example-playbook">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_disk_config }</span>
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_interfaces"><code>uan_interfaces</code></h2>
<p>The <code>uan_interfaces</code> role configures site/customer-defined network interfaces
and Shasta Customer Access Network (CAN) network interfaces on UAN nodes.</p>
<h3 id="requirements-1">Requirements</h3>
<p>None.</p>
<h3 id="role-variables-1">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_nmn_bond</code></dt>
<dd>
<p><code>uan_nmn_bond</code> is a boolean variable controlling the configuration of the Node Management Network (NMN). When true, the NMN network connection will be configured as a bonded pair of interfaces defined by the members of the <code>uan_nmn_bond_slaves</code> variable. The bonded NMN interface is named <code>nmnb0</code>. When false, the NMN network connection will be configured as a single interface named <code>nmn0</code>.</p>
</dd>
</dl>
<p>The default value of <code>uan_nmn_bond</code> is <code>no</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_nmn_bond</span>: <span style="color:#66d9ef">no</span>
</span></span></code></pre></div><dl>
<dt><code>uan_nmn_bond_slaves</code></dt>
<dd>
<p><code>uan_nmn_bond_slaves</code> is a list of the interfaces to use as the bond slave pair when <code>uan_nmn_bond</code> is true.</p>
</dd>
</dl>
<p>The interface names must be in a format which doesn&rsquo;t change between reboots of the node, such as <code>ens10f0</code> which is the first port of the NIC in slot 10.</p>
<p><strong>NOTE:</strong> <code>ens10f0</code> is typically the first port of the OCP 25Gb card that
the node PXE boots.</p>
<p><strong>IMPORTANT!</strong> The first interface in the list must be the <code>nmn0</code> interface which is configured during the initial image boot, typically <code>ens10f0</code>.  This is required because the MAC address of the <code>nmn0</code> interface is the MAC associated with the IP address of the UAN.  The bonded <code>nmnb0</code> interface and the bond slaves will assume this MAC and the IP address of <code>nmn0</code> to preserve connectivity.</p>
<p>The second interface is typically the first port of a different 25Gb NIC for resiliency.</p>
<p>The default values of <code>uan_nmn_bond_slaves</code> are shown here.  They may need to be changed to match the actual node cabling and NIC configuration.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_nmn_bond_slaves</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;ens10f0&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;ens1f0&#34;</span>
</span></span></code></pre></div><dl>
<dt><code>uan_can_setup</code></dt>
<dd>
<p><code>uan_can_setup</code> is a boolean variable controlling the configuration of user
access to UAN nodes.  When true, user access is configured over either the
Customer Access Network (CAN) or Customer High Speed Network (CHN), depending on which is configured on the system.</p>
</dd>
</dl>
<p>When <code>uan_can_setup</code> is false, user access over the CAN or CHN is not configured
on the UAN nodes and no default route is configured.  The Admin must then specify
the default route in <code>customer_uan_routes</code>.</p>
<p>The default value of <code>uan_can_setup</code> is <code>no</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_can_setup</span>: <span style="color:#66d9ef">no</span>
</span></span></code></pre></div><dl>
<dt><code>uan_can_bond_slaves</code></dt>
<dd>
<p><code>uan_can_bond_slaves</code> is a list of the interfaces to use as the bond slave pair when <code>uan_can_setup</code> is true, <code>uan_nmn_bond</code> is true, and the Customer Access Network (CAN) is configured on the system.  This variable is ignored if <code>uan_nmn_bond</code> is false.</p>
</dd>
</dl>
<p>The interface names must be in a format which doesn&rsquo;t change between reboots of the node, such as <code>ens10f1</code> which is the second port of the NIC in slot 10.</p>
<p><strong>NOTE:</strong> <code>ens10f1</code> is typically the second port of the OCP 25Gb card and is used as one of the bond slaves in the CAN <code>bond0</code> interface.</p>
<p>The second interface is typically the second port of a different 25Gb NIC for resiliency.</p>
<p>The default values of <code>uan_can_bond_slaves</code> are shown here.  They may need to be changed to match the actual node cabling and NIC configuration.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_can_bond_slaves</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;ens10f1&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;ens1f1&#34;</span>
</span></span></code></pre></div><dl>
<dt><code>uan_chn_device</code></dt>
<dd>
<p><code>uan_chn_device</code> is a variable which can be used to override the default CHN device on the UAN nodes.</p>
</dd>
</dl>
<p>The default value of <code>uan_chn_device</code> is shown here.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_chn_device</span>: <span style="color:#e6db74">&#34;hsn0&#34;</span>
</span></span></code></pre></div><p><code>uan_customer_default_route</code>^M</p>
<dl>
<dt><code>uan_customer_default_route</code></dt>
<dd>
<p><code>uan_customer_default_route</code> is a boolean variable that allows the default route
to be set by the <code>customer_uan_routes</code> data when <code>uan_can_setup</code> is true.</p>
</dd>
</dl>
<p>By default, no default route is setup unless <code>uan_can_setup</code> is true, which sets the default route to the CAN or CHN.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_customer_default_route</span>: <span style="color:#66d9ef">no</span>
</span></span></code></pre></div><dl>
<dt><code>sls_nmn_name</code></dt>
<dd>
<p><code>sls_nmn_name</code> is the Node Management Network name used by SLS.
This value should not be changed.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">sls_nmn_name</span>: <span style="color:#e6db74">&#34;NMN&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>sls_nmn_svcs_name</code></dt>
<dd>
<p>is the Node Management Services Network name used by SLS.
This value should not be changed.</p>
</dd>
<dt><code>uan_required_dns_options</code></dt>
<dd>
<p><code>uan_required_dns_options</code> is a list of DNS options.  By default, <code>single-request</code> is set and must not be removed.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_required_dns_options</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;single-request&#39;</span>
</span></span></code></pre></div></dd>
<dt><code>customer_uan_interfaces</code></dt>
<dd>
<p><code>customer_uan_interfaces</code> is as list of interface names used for constructing <code>ifcfg-&lt;customer_uan_interfaces.name&gt;</code> files. Define ifcfg fields for each interface here. Field names are converted to uppercase in the generated <code>ifcfg-&lt;name&gt;</code> file(s).</p>
<p>Interfaces should be defined in order of dependency.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">customer_uan_interfaces</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">settings</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">bootproto</span>: <span style="color:#e6db74">&#34;static&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ipaddr</span>: <span style="color:#e6db74">&#34;1.2.3.4&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">startmode</span>: <span style="color:#e6db74">&#34;auto&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">settings</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">bootproto</span>: <span style="color:#e6db74">&#34;static&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">device</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ipaddr</span>: <span style="color:#e6db74">&#34;5.6.7.8&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">startmode</span>: <span style="color:#e6db74">&#34;auto&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>customer_uan_routes</code></dt>
<dd>
<p><code>customer_uan_routes</code> is as list of interface routes used for constructing <code>ifroute-&lt;customer_uan_routes.name&gt;</code> files.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">customer_uan_routes</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;default 10.103.8.20 255.255.255.255 - table 3&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;10.103.8.128/25 10.103.8.20 255.255.255.255 net2&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>customer_uan_rules</code></dt>
<dd>
<p><code>customer_uan_rules</code> is as list of interface rules used for constructing <code>ifrule-&lt;customer_uan_routes.name&gt;</code> files.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">customer_uan_rules</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net1&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#e6db74">&#34;from 10.1.0.0/16 lookup 1&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;net2&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#e6db74">&#34;from 10.103.8.0/24 lookup 3&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>customer_uan_global_routes</code></dt>
<dd>
<p><code>customer_uan_global_routes</code> is a list of global routes used for constructing
the &ldquo;routes&rdquo; file.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">customer_uan_global_routes</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;10.92.100.0 10.252.0.1 255.255.255.0 -&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;10.100.0.0 10.252.0.1 255.255.128.0 -&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>external_dns_searchlist</code></dt>
<dd>
<p><code>external_dns_searchlist</code> is a list of customer-configurable fields to be added to the <code>/etc/resolv.conf</code> DNS search list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">external_dns_searchlist</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;my.domain.com&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;my.other.domain.com&#39;</span>
</span></span></code></pre></div></dd>
<dt><code>external_dns_servers</code></dt>
<dd>
<p><code>external_dns_servers</code> is a list of customer-configurable fields to be added to the <code>/etc/resolv.conf</code> DNS server list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">external_dns_servers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;1.2.3.4&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;5.6.7.8&#39;</span>
</span></span></code></pre></div></dd>
<dt><code>external_dns_options</code></dt>
<dd>
<p><code>external_dns_options</code> is a list of customer-configurable fields to be added
to the <code>/etc/resolv.conf</code> DNS options list.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">external_dns_options</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#39;single-request&#39;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_access_control</code></dt>
<dd>
<p><code>uan_access_control</code> is a boolean variable to control whether non-root access control is enabled.  Default is <code>no</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_access_control</span>: <span style="color:#66d9ef">no</span>
</span></span></code></pre></div></dd>
<dt><code>api_gateways</code></dt>
<dd>
<p><code>api_gateways</code> is a list of API gateway DNS names to block non-user access</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">api_gateways</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;api-gw-service&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;api-gw-service.local&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;api-gw-service-nmn.local&#34;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;kubeapi-vip&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>api_gw_ports</code></dt>
<dd>
<p><code>api_gw_ports</code> is a list of gateway ports to protect.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">api_gw_ports</span>: <span style="color:#e6db74">&#34;80,443,8081,8888&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>sls_url</code></dt>
<dd>
<p><code>sls_url</code> is the SLS URL.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">sls_url</span>: <span style="color:#e6db74">&#34;http://cray-sls&#34;</span>
</span></span></code></pre></div></dd>
</dl>
<h3 id="dependencies-1">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-1">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_interfaces }</span>
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_ldap"><code>uan_ldap</code></h2>
<p>The <code>uan_ldap</code> role configures LDAP and AD groups on UAN nodes.</p>
<h3 id="requirements-2">Requirements</h3>
<p>NSCD, pam-config, sssd.</p>
<h3 id="role-variables-2">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_ldap_setup</code></dt>
<dd>
<p>A boolean variable to selectively skip the setup of LDAP on nodes it would otherwise be configured due to <code>uan_ldap_config</code> being defined.  The default setting is to setup LDAP when <code>uan_ldap_config</code> is not empty.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_ldap_setup</span>: <span style="color:#66d9ef">yes</span>
</span></span></code></pre></div></dd>
<dt><code>uan_ldap_config</code></dt>
<dd>
<p>Configures LDAP domains and servers. If this list is empty, no LDAP configuration will be applied to the UAN targets and all role tasks will be skipped.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_ldap_config</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">domain</span>: <span style="color:#e6db74">&#34;mydomain-ldaps&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">search_base</span>: <span style="color:#e6db74">&#34;dc=...,dc=...&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">servers</span>: [<span style="color:#e6db74">&#34;ldaps://123.123.123.1&#34;</span>, <span style="color:#e6db74">&#34;ldaps://213.312.123.132&#34;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">chpass_uri</span>: [<span style="color:#e6db74">&#34;ldaps://123.123.123.1&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">domain</span>: <span style="color:#e6db74">&#34;mydomain-ldap&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">search_base</span>: <span style="color:#e6db74">&#34;dc=...,dc=...&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">servers</span>: [<span style="color:#e6db74">&#34;ldap://123.123.123.1&#34;</span>, <span style="color:#e6db74">&#34;ldap://213.312.123.132&#34;</span>]
</span></span></code></pre></div></dd>
<dt><code>uan_ad_groups</code></dt>
<dd>
<p>Configures active directory groups on UAN nodes.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_ad_groups</span>:
</span></span><span style="display:flex;"><span>  - { <span style="color:#f92672">name: admin_grp, origin</span>: <span style="color:#ae81ff">ALL }</span>
</span></span><span style="display:flex;"><span>  - { <span style="color:#f92672">name: dev_users, origin</span>: <span style="color:#ae81ff">ALL }</span>
</span></span></code></pre></div></dd>
<dt><code>uan_pam_modules</code></dt>
<dd>
<p>Configures PAM modules on the UAN nodes in <code>/etc/pam.d</code>.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_pam_modules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;common-account&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">lines</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;account required\tpam_access.so&#34;</span>
</span></span></code></pre></div></dd>
</dl>
<h3 id="dependencies-2">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-2">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_ldap }</span>
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_motd">uan_motd</h2>
<p>The <code>uan_motd</code> role appends text to the <code>/etc/motd</code> file.</p>
<h3 id="requirements-3">Requirements</h3>
<p>None.</p>
<h3 id="role-variables-3">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_motd_content</span>: []
</span></span></code></pre></div><dl>
<dt><code>uan_motd_content</code></dt>
<dd>
<p>Contains text to be added to the end of the <code>/etc/motd</code> file.</p>
</dd>
</dl>
<h3 id="dependencies-3">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-3">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role: uan_motd, uan_motd_content</span>: <span style="color:#e6db74">&#34;MOTD CONTENT&#34;</span> }
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_packages">uan_packages</h2>
<p>The <code>uan_packages</code> role installs additional RPMs on UANs using the Ansible
<code>zypper</code> module.</p>
<p>Packages that are required for UANs to function should be preferentially
installed during image customization and/or image creation.</p>
<p>Installing RPMs during post-boot node configuration can cause high system loads
on large systems.</p>
<p>This role will only run on SLES-based nodes.</p>
<h3 id="requirements-4">Requirements</h3>
<p>Zypper must be installed.</p>
<h3 id="role-variables-4">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_additional_sles15_packages</span>: []
</span></span></code></pre></div><dl>
<dt><code>uan_additional_sles15_packages</code></dt>
<dd>
<p>contains the list of RPM packages to install.</p>
</dd>
</dl>
<h3 id="dependencies-4">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-4">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role: uan_packages, uan_additional_sles15_packages</span>: [<span style="color:#e6db74">&#39;vim&#39;</span>] }
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>
<h2 id="uan_shadow">uan_shadow</h2>
<p>The <code>uan_shadow</code> role configures the root password on UAN nodes.</p>
<h3 id="requirements-5">Requirements</h3>
<p>The root password hash has to be installed in HashiCorp Vault at <code>secret/uan root_password</code>.</p>
<h3 id="role-variables-5">Role Variables</h3>
<p>Available variables are listed below, along with default values (see <code>defaults/main.yml</code>):</p>
<dl>
<dt><code>uan_vault_url</code></dt>
<dd>
<p>The URL for the HashiCorp Vault</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_vault_url</span>: <span style="color:#e6db74">&#34;http://cray-vault.vault:8200&#34;</span>
</span></span></code></pre></div></dd>
<dt><code>uan_vault_role_file</code></dt>
<dd>
<p>The required Kubernetes role file for HashiCorp Vault access.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_vault_role_file</span>: <span style="color:#ae81ff">/var/run/secrets/kubernetes.io/serviceaccount/namespace</span>
</span></span></code></pre></div></dd>
<dt><code>uan_vault_jwt_file</code></dt>
<dd>
<p>The path to the required Kubernetes token file for HashiCorp Vault access.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_vault_jwt_file</span>: <span style="color:#ae81ff">/var/run/secrets/kubernetes.io/serviceaccount/token</span>
</span></span></code></pre></div></dd>
<dt><code>uan_vault_path</code></dt>
<dd>
<p>The path to use for storing data for UANs in HashiCorp Vault.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_vault_path</span>: <span style="color:#ae81ff">secret/uan</span>
</span></span></code></pre></div></dd>
<dt><code>uan_vault_key</code></dt>
<dd>
<p>The key used for storing the root password in HashiCorp Vault.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">uan_vault_key</span>: <span style="color:#ae81ff">root_password</span>
</span></span></code></pre></div></dd>
</dl>
<h3 id="dependencies-5">Dependencies</h3>
<p>None.</p>
<h3 id="example-playbook-5">Example Playbook</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">Application_UAN</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">roles</span>:
</span></span><span style="display:flex;"><span>      - { <span style="color:#f92672">role</span>: <span style="color:#ae81ff">uan_shadow }</span>
</span></span></code></pre></div><p>This role is included in the UAN <code>site.yml</code> play.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1691204688"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1691204688"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1691204688"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1691204688"></script>
    <script src="/docs-uan/js/featherlight.min.js?1691204688"></script>
    <script src="/docs-uan/js/highlight.pack.js?1691204688"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1691204688"></script>
    <script src="/docs-uan/js/learn.js?1691204688"></script>
    <script src="/docs-uan/js/hugo-learn.js?1691204688"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1691204688"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

