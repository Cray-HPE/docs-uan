<!DOCTYPE html>
<html lang="en-271" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1705201466" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1705201466" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1705201466" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1705201466"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    
  </head>
  <body class="" data-url="/docs-uan/en-271/advanced/sles_image/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-271'>
<img src=/docs-uan/images/hpe_pri_wht_rev_rgb.png alt="HPE" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1705201466"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1705201466"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-271";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1705201466"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/installation_prereqs/">
          installation prereqs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare for UAN Product Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure the BMC for UANs with iLO
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure the BIOS of an HPE UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/install/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/install/">
          install
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/install/install_the_uan_product_stream/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/install/install_the_uan_product_stream/">
        Install or Upgrade UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/operations/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/operations/">
          operations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/basic_uan_configuration/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/basic_uan_configuration/">
        Basic UAN Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build a New UAN Image Using a COS Recipe
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/create_uan_boot_images/">
        Create UAN Boot Images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/mount_a_new_file_system_on_an_uan/">
        Mount a New File System on a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/configure_interfaces_on_uans/">
        Configure Interfaces on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (PAM) on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/boot_uans/">
        Boot UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/cve-2023-0461/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/cve-2023-0461/">
        Mitigation for CVE-2023-0461
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_packages/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_packages/">
        `UAN packages`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_shadow/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_shadow/">
        `UAN shadow`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_ldap/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_ldap/">
        `UAN LDAP`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_motd/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_motd/">
        `UAN motd`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_hardening/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_hardening/">
        `UAN hardening`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_interfaces/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_interfaces/">
        `UAN interfaces`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_disk_config/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_disk_config/">
        `UAN disk config`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_gpg_keys/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_gpg_keys/">
        `UAN gpg keys`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_ca_cert/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_ca_cert/">
        `UAN ca cert`
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/advanced/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-271/advanced/">
          advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/enabling_can_chn/">
        Enabling the Customer Access Network (CAN) or the Customer High Speed Network (CHN)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/repurposing_compute_as_uan/">
        Repurposing a Compute Node as a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/designating_application_nodes_for_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/designating_application_nodes_for_k3s/">
        Designating Application Nodes for K3s (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/enabling_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/enabling_k3s/">
        Configuring a UAN for K3s (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/sles_image/" title="" class="dd-item active">
        <a href="/docs-uan/en-271/advanced/sles_image/">
        Booting an Application Node with a SLE HPC Image (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/upgrade/">
          upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/upgrade/notable_changes/">
        Notable Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/upgrade/upgrades/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/upgrade/upgrades/">
        Upgrades
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/troubleshooting/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/troubleshooting/">
          troubleshooting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS and Network Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/test-plan/">
          test-plan
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/test-plan/test-plan/">
        Test Plan for User Access Node (UAN) and Repurposed Compute Node as UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            
            Version: 
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-271" value="/docs-uan/en-271/advanced/sles_image/" selected>2.7.1</option>
                    
                  
              
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-270" value="/docs-uan/en-270/advanced/sles_image/">2.7.0</option>
                    
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-262" value="/docs-uan/en-262/advanced/sles_image/">2.6.2</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-261" value="/docs-uan/en-261/advanced/sles_image/">2.6.1</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-2511" value="/docs-uan/en-2511/advanced/sles_image/">2.5.11</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-271/'></a> > <a href='/docs-uan/en-271/advanced/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#limitations">Limitations</a></li>
    <li><a href="#procedure-overview">Procedure Overview</a></li>
    <li><a href="#procedure">Procedure</a></li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#dracut-failures-during-booting">Dracut failures during booting</a></li>
        <li><a href="#unable-to-log-in-to-the-node">Unable to log in to the node</a></li>
        <li><a href="#dhcp-hostname-is-not-set">DHCP hostname is not set</a></li>
        <li><a href="#spire-is-not-running">Spire is not running</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="booting-an-application-node-with-a-sle-hpc-image-technical-preview">Booting an Application Node with a SLE HPC Image (Technical Preview)</h1>
<p>A SLE HPC image is available for use with Application Node types such as gateways and LNet routers. This image is considered a &ldquo;Technical Preview&rdquo; as the initial support for booting with SLE HPC Images without COS. This Application Node image differs from the standard COS-based image because this image does not include the COS kernel and libraries that Compute Nodes (CNs) have.</p>
<p>The image is built from the same pipeline as Non-Compute Node (NCN) Images. Similarities may be noticed including the kernel and package versions.</p>
<p>This procedure documents how to boot and configure this image.</p>
<h2 id="limitations">Limitations</h2>
<p>As this feature is a &ldquo;Technical Preview&rdquo; of supporting SLE HPC Images on Application Nodes, there are several limitations:</p>
<ul>
<li>CFS Configurations that operate on COS and NCN images are not yet supported.</li>
<li>CFS Node Personalization must be started manually.</li>
</ul>
<h2 id="procedure-overview">Procedure Overview</h2>
<p>The following steps outline the process of configuring and booting an Application Node with the SLE HPC Image.</p>
<ol>
<li>
<p>Determine the image to use.</p>
</li>
<li>
<p>Customize the image with SAT and generate a BOS Session Template</p>
</li>
<li>
<p>Update BOS Session Template with the necessary parameters.</p>
</li>
<li>
<p>Reboot the node.</p>
</li>
</ol>
<h2 id="procedure">Procedure</h2>
<p>Perform the following steps to configure and boot a SLE HPC image on an Application type node.</p>
<ol>
<li>
<p>Log in to the master node <code>ncn-m001</code>. All commands in this procedure are run from the master node.</p>
</li>
<li>
<p>Verify that the UAN release contains a SLES image.</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# UAN_RELEASE<span style="color:#f92672">=</span>@product_version@
</span></span><span style="display:flex;"><span>ncn-m001# sat showrev --no-headings --filter <span style="color:#e6db74">&#34;product_version = </span>$UAN_RELEASE<span style="color:#e6db74">&#34;</span> --filter <span style="color:#e6db74">&#34;product_name = uan&#34;</span>
</span></span></code></pre></div><ol>
<li>Select an Image to boot or customize.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# APP_IMAGE_NAME<span style="color:#f92672">=</span>cray-application-sles15sp5.x86_64-5.2.42
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ncn-m001# APP_IMAGE_ID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cray ims images list --format json  | jq --arg APP_IMAGE_NAME <span style="color:#e6db74">&#34;</span>$APP_IMAGE_NAME<span style="color:#e6db74">&#34;</span> -r <span style="color:#e6db74">&#39;sort_by(.created) | .[] | select(.name == $APP_IMAGE_NAME ) | .id&#39;</span> | head -1<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ncn-m001# cray ims images describe $APP_IMAGE_ID --format json
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;arch&#34;</span>: <span style="color:#e6db74">&#34;x86_64&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2023-11-06T15:47:10.564555+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;51b19502-a13b-42ab-a653-b1ee7e6a7fb5&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;link&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;etag&#34;</span>: <span style="color:#e6db74">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;</span>path<span style="color:#e6db74">&#34;: &#34;</span>s3://boot-images/51b19502-a13b-42ab-a653-b1ee7e6a7fb5/manifest.json<span style="color:#e6db74">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;</span>type<span style="color:#e6db74">&#34;: &#34;</span>s3<span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  },
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;</span>name<span style="color:#e6db74">&#34;: &#34;</span>cray-application-sles15sp5.aarch64-5.2.42<span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span></code></pre></div><ol>
<li>Customize the image using SAT Bootprep. These commands will add a root password to the image as one is not included. Support for additional product layers will be added in subsequent releases. Update the fields below for the correct software versions, branch names, and</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# cat product_vars.yml
</span></span><span style="display:flex;"><span>recipe:
</span></span><span style="display:flex;"><span>  version: app-sle-1
</span></span><span style="display:flex;"><span>csm:
</span></span><span style="display:flex;"><span>  version: 1.5.0
</span></span><span style="display:flex;"><span>  branch: cray/csm/1.16.22
</span></span><span style="display:flex;"><span>uan:
</span></span><span style="display:flex;"><span>  version: @product_version@
</span></span><span style="display:flex;"><span>  branch: integration-@product_version@
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ncn-m001# cat bootprep.yml
</span></span><span style="display:flex;"><span>configurations:
</span></span><span style="display:flex;"><span>- name: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  layers:
</span></span><span style="display:flex;"><span>  - name: csm
</span></span><span style="display:flex;"><span>    playbook: csm_packages.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: csm
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{csm.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{csm.branch}}&#34;</span>
</span></span><span style="display:flex;"><span>  - name: uan
</span></span><span style="display:flex;"><span>    playbook: site.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: uan
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{uan.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{uan.branch}}&#34;</span>
</span></span><span style="display:flex;"><span>  - name: uan-<span style="color:#f92672">{{</span>uan.version<span style="color:#f92672">}}</span>
</span></span><span style="display:flex;"><span>    playbook: rebuild-initrd.yml
</span></span><span style="display:flex;"><span>    product:
</span></span><span style="display:flex;"><span>      name: uan
</span></span><span style="display:flex;"><span>      version: <span style="color:#e6db74">&#34;{{uan.version}}&#34;</span>
</span></span><span style="display:flex;"><span>      branch: <span style="color:#e6db74">&#34;{{uan.branch}}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>images:
</span></span><span style="display:flex;"><span>- name: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  ims:
</span></span><span style="display:flex;"><span>    is_recipe: false
</span></span><span style="display:flex;"><span>    name: cray-application-sles15sp5.x86_64-5.2.42
</span></span><span style="display:flex;"><span>  configuration: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  configuration_group_names:
</span></span><span style="display:flex;"><span>  - Application
</span></span><span style="display:flex;"><span>  - Application_UAN
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>session_templates:
</span></span><span style="display:flex;"><span>- name: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  image:
</span></span><span style="display:flex;"><span>    ims:
</span></span><span style="display:flex;"><span>      name: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  configuration: <span style="color:#e6db74">&#34;{{recipe.version}}&#34;</span>
</span></span><span style="display:flex;"><span>  bos_parameters:
</span></span><span style="display:flex;"><span>    boot_sets:
</span></span><span style="display:flex;"><span>      uan:
</span></span><span style="display:flex;"><span>        kernel_parameters: console<span style="color:#f92672">=</span>ttyS0,115200 bad_page<span style="color:#f92672">=</span>panic crashkernel<span style="color:#f92672">=</span>512M hugepagelist<span style="color:#f92672">=</span>2m-2g intel_iommu<span style="color:#f92672">=</span>off intel_pstate<span style="color:#f92672">=</span>disable iommu.passthrough<span style="color:#f92672">=</span>on modprobe.blacklist<span style="color:#f92672">=</span>amdgpu numa_interleave_omit<span style="color:#f92672">=</span>headless oops<span style="color:#f92672">=</span>panic pageblock_order<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span> rd.neednet<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> rd.retry<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span> rd.shell split_lock_detect<span style="color:#f92672">=</span>off systemd.unified_cgroup_hierarchy<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> ip<span style="color:#f92672">=</span>:::::eth0:dhcp:10.92.100.225:169.254.169.254 quiet spire_join_token<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>SPIRE_JOIN_TOKEN<span style="color:#e6db74">}</span> root<span style="color:#f92672">=</span>live:s3://boot-images/REPLACE_ME/rootfs psi<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        node_roles_groups:
</span></span><span style="display:flex;"><span>        - Application
</span></span><span style="display:flex;"><span>        rootfs_provider_passthrough: <span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        rootfs_provider: &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ncn-m001# sat bootprep run --vars-file product_vars.yml bootprep.yml
</span></span></code></pre></div><ol>
<li>Once SAT has completed successfully, the BOS session template must be updated to reference the correct root kernel parameter. This involves replacing &ldquo;REPLACE_ME&rdquo; with the resultant image ID from SAT bootprep. The image ID may be determined by first querying IMS.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# RECIPE_NAME<span style="color:#f92672">=</span>app-sle-1
</span></span><span style="display:flex;"><span>ncn-m001# RESULTANT_ID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cray ims images list --format json | jq --arg imgname <span style="color:#e6db74">&#34;</span>$RECIPE_NAME<span style="color:#e6db74">&#34;</span> -r <span style="color:#e6db74">&#39;.[] | select(.name == $imgname) | .id&#39;</span> | head -1<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ncn-m001# cray bos sessiontemplates describe $RECIPE_NAME --format json | jq <span style="color:#e6db74">&#39;del(.name,.tenant)&#39;</span> | sed -e <span style="color:#e6db74">&#34;s/REPLACE_ME/</span>$RESULTANT_ID<span style="color:#e6db74">/g&#34;</span> &gt; $RECIPE_NAME.json
</span></span><span style="display:flex;"><span>ncn-m001# cray bos sessiontemplates update $RECIPE_NAME --file $RECIPE_NAME.json
</span></span></code></pre></div><ol start="3">
<li>Use the session template to boot one or more nodes.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# cray bos sessions create --operation reboot --template-name $RECIPE_NAME --limit &lt;xname<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>&gt;
</span></span></code></pre></div><ol>
<li>If the node does not complete the boot successfully, proceed to the troubleshooting section in this guide.</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Some general troubleshooting tips may help in getting started using the SLE HPC image.</p>
<h3 id="dracut-failures-during-booting">Dracut failures during booting</h3>
<ol>
<li>
<p>Could not find the kernel or the initrd. Verify the BSS boot parameters for the node. Specifically, check that the IMS Image ID is correct.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>http://rgw-vip.nmn/boot-images/13964414-bbad-40e9-9e31-a3683010febbasdf/kernel...HTTP 0x7f0fa808 status <span style="color:#ae81ff">404</span> Not Found
</span></span><span style="display:flex;"><span> No such file or directory <span style="color:#f92672">(</span>http://ipxe.org/2d0c618e<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>http://rgw-vip.nmn/boot-images/13964414-bbad-40e9-9e31-a3683010febbasdf/initrd...HTTP 0x7f0fa808 status <span style="color:#ae81ff">404</span> Not Found
</span></span><span style="display:flex;"><span> No such file or directory <span style="color:#f92672">(</span>http://ipxe.org/2d0c618e<span style="color:#f92672">)</span>
</span></span></code></pre></div></li>
<li>
<p>The dracut module <code>livenet</code> is missing from the initrd. Make sure that the initrd was regenerated with <code>/srv/cray/scripts/common/create-ims-initrd.sh</code> if CFS was used.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2022-08-24 14:48:53 <span style="color:#f92672">[</span>    5.784023<span style="color:#f92672">]</span> dracut: FATAL: Don<span style="color:#e6db74">&#39;t know how to handle &#39;</span>root<span style="color:#f92672">=</span>live:http://rgw-vip/boot-images/e88ed416-5d58-4421-9013-fa2171ac11b8/rootfs?AWSAccessKeyId<span style="color:#f92672">=</span>I43RBLH07R65TRO3AL02&amp;Signature<span style="color:#f92672">=</span>bL661kZHPyEgBsLLEuJHFz3zKVs%3D&amp;Expires<span style="color:#f92672">=</span><span style="color:#ae81ff">1661438587</span>
</span></span><span style="display:flex;"><span>2022-08-24 14:48:53 <span style="color:#f92672">[</span>    5.805063<span style="color:#f92672">]</span> dracut: Refusing to <span style="color:#66d9ef">continue</span>
</span></span></code></pre></div></li>
</ol>
<h3 id="unable-to-log-in-to-the-node">Unable to log in to the node</h3>
<ol>
<li>The node is not up. Connect to the console and determine why the node has not booted, starting with the troubleshooting tips.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001:# ssh app01
</span></span><span style="display:flex;"><span>ssh: connect to host uan01 port 22: No route to host
</span></span></code></pre></div><ol>
<li>Unable to log in to the node with a password. No root password is defined in the image by default, one must be added by CFS or by modifying the squashfs filesystem.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001:# ssh app01
</span></span><span style="display:flex;"><span>    Password:
</span></span><span style="display:flex;"><span>    Password:
</span></span><span style="display:flex;"><span>    Password:
</span></span><span style="display:flex;"><span>    root@app01<span style="color:#960050;background-color:#1e0010">&#39;</span>s password:
</span></span><span style="display:flex;"><span>    Permission denied, please try again
</span></span></code></pre></div><h3 id="dhcp-hostname-is-not-set">DHCP hostname is not set</h3>
<ol>
<li>
<p>If the node does not have a hostname assigned from DHCP, try verifying the DHCP settings and restarting wicked.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>x3000c0s13b0n0:~ <span style="color:#75715e"># grep -R ^DHCLIENT_SET_HOSTNAME= /etc/sysconfig/network/dhcp</span>
</span></span><span style="display:flex;"><span>DHCLIENT_SET_HOSTNAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;yes&#34;</span>
</span></span><span style="display:flex;"><span>x3000c0s13b0n0:# systemctl restart wicked
</span></span><span style="display:flex;"><span>x3000c0s13b0n0:# hostnamectl
</span></span><span style="display:flex;"><span>   Static hostname: x3000c0s13b0n0
</span></span><span style="display:flex;"><span>Transient hostname: app01
</span></span><span style="display:flex;"><span>         Icon name: computer-server
</span></span><span style="display:flex;"><span>           Chassis: server
</span></span><span style="display:flex;"><span>        Machine ID: 9bd0aacf29d04dd4827bc464121b130b
</span></span><span style="display:flex;"><span>           Boot ID: af753b4e6fa9419bb14d55a029d0f526
</span></span><span style="display:flex;"><span>  Operating System: SUSE Linux Enterprise High Performance Computing <span style="color:#ae81ff">15</span> SP3
</span></span><span style="display:flex;"><span>       CPE OS Name: cpe:/o:suse:sle_hpc:15:sp3
</span></span><span style="display:flex;"><span>            Kernel: Linux 5.3.18-150300.59.43-default
</span></span><span style="display:flex;"><span>      Architecture: x86-64
</span></span><span style="display:flex;"><span>x3000c0s13b0n0:# hostname
</span></span><span style="display:flex;"><span>app01
</span></span></code></pre></div></li>
</ol>
<h3 id="spire-is-not-running">Spire is not running</h3>
<ol>
<li>
<p>Check the spire-agent logs for error messages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>app01# systemctl status spire-agent
</span></span></code></pre></div></li>
</ol>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1705201466"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1705201466"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1705201466"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1705201466"></script>
    <script src="/docs-uan/js/featherlight.min.js?1705201466"></script>
    <script src="/docs-uan/js/highlight.pack.js?1705201466"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1705201466"></script>
    <script src="/docs-uan/js/learn.js?1705201466"></script>
    <script src="/docs-uan/js/hugo-learn.js?1705201466"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1705201466"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

