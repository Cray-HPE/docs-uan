<!DOCTYPE html>
<html lang="en-271" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/docs-uan/images/favicon.png" type="image/png">

    <title> :: User Access Node (UAN)</title>

    
    <link href="/docs-uan/css/nucleus.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/fontawesome-all.min.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/hybrid.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/featherlight.min.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/perfect-scrollbar.min.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/auto-complete.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/atom-one-dark-reasonable.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/theme.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/tabs.css?1705460687" rel="stylesheet">
    <link href="/docs-uan/css/hugo-theme.css?1705460687" rel="stylesheet">
    
    <link href="/docs-uan/css/theme-green.css?1705460687" rel="stylesheet">
    
    

    <script src="/docs-uan/js/jquery-3.3.1.min.js?1705460687"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
    
  </head>
  <body class="" data-url="/docs-uan/en-271/install/install_the_uan_product_stream/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-uan/en-271'>
<img src=/docs-uan/images/hpe_pri_wht_rev_rgb.png alt="HPE" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-uan/js/lunr.min.js?1705460687"></script>
<script type="text/javascript" src="/docs-uan/js/auto-complete.js?1705460687"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-uan\/\/en-271";
    
</script>
<script type="text/javascript" src="/docs-uan/js/search.js?1705460687"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/installation_prereqs/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/installation_prereqs/">
          installation prereqs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/prepare_for_uan_product_installation/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/prepare_for_uan_product_installation/">
        Prepare for UAN Product Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/configure_the_bmc_for_uans_with_ilo/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/configure_the_bmc_for_uans_with_ilo/">
        Configure the BMC for UANs with iLO
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/installation_prereqs/configure_the_bios_of_an_hpe_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/installation_prereqs/configure_the_bios_of_an_hpe_uan/">
        Configure the BIOS of an HPE UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/install/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/docs-uan/en-271/install/">
          install
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/install/install_the_uan_product_stream/" title="" class="dd-item active">
        <a href="/docs-uan/en-271/install/install_the_uan_product_stream/">
        Install or Upgrade UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/operations/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/operations/">
          operations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/basic_uan_configuration/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/basic_uan_configuration/">
        Basic UAN Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/build_a_new_uan_image_using_the_cos_recipe/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/build_a_new_uan_image_using_the_cos_recipe/">
        Build a New UAN Image Using a COS Recipe
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/create_uan_boot_images/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/create_uan_boot_images/">
        Create UAN Boot Images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/mount_a_new_file_system_on_an_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/mount_a_new_file_system_on_an_uan/">
        Mount a New File System on a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/configure_interfaces_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/configure_interfaces_on_uans/">
        Configure Interfaces on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/configure_pluggable_authentication_modules_pam_on_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/configure_pluggable_authentication_modules_pam_on_uans/">
        Configure Pluggable Authentication Modules (PAM) on UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/boot_uans/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/boot_uans/">
        Boot UANs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/cve-2023-0461/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/cve-2023-0461/">
        Mitigation for CVE-2023-0461
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_packages/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_packages/">
        `UAN packages`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_shadow/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_shadow/">
        `UAN shadow`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_interfaces/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_interfaces/">
        `UAN interfaces`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_ldap/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_ldap/">
        `UAN LDAP`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_motd/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_motd/">
        `UAN motd`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_gpg_keys/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_gpg_keys/">
        `UAN gpg keys`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_hardening/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_hardening/">
        `UAN hardening`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_ca_cert/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_ca_cert/">
        `UAN ca cert`
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/operations/uan_disk_config/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/operations/uan_disk_config/">
        `UAN disk config`
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/advanced/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/advanced/">
          advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/enabling_can_chn/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/enabling_can_chn/">
        Enabling the Customer Access Network (CAN) or the Customer High Speed Network (CHN)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/repurposing_compute_as_uan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/repurposing_compute_as_uan/">
        Repurposing a Compute Node as a UAN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/designating_application_nodes_for_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/designating_application_nodes_for_k3s/">
        Designating Application Nodes for K3s (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/enabling_k3s/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/enabling_k3s/">
        Configuring a UAN for K3s (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/advanced/sles_image/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/advanced/sles_image/">
        Booting an Application Node with a SLE HPC Image (Technical Preview)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/upgrade/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/upgrade/">
          upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/upgrade/notable_changes/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/upgrade/notable_changes/">
        Notable Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/upgrade/upgrades/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/upgrade/upgrades/">
        Upgrades
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/troubleshooting/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/troubleshooting/">
          troubleshooting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_boot_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_boot_issues/">
        Troubleshoot UAN Boot Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_cfs_and_network_configuration_issues/">
        Troubleshoot UAN CFS and Network Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/troubleshooting/troubleshoot_uan_disk_configuration_issues/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/troubleshooting/troubleshoot_uan_disk_configuration_issues/">
        Troubleshoot UAN Disk Configuration Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/docs-uan/en-271/test-plan/" title="" class="dd-item
        
        
        
        ">
      <a href="/docs-uan/en-271/test-plan/">
          test-plan
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-uan/en-271/test-plan/test-plan/" title="" class="dd-item ">
        <a href="/docs-uan/en-271/test-plan/test-plan/">
        Test Plan for User Access Node (UAN) and Repurposed Compute Node as UAN
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            
            Version: 
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-271" value="/docs-uan/en-271/install/install_the_uan_product_stream/" selected>2.7.1</option>
                    
                  
              
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-270" value="/docs-uan/en-270/install/install_the_uan_product_stream/">2.7.0</option>
                    
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-262" value="/docs-uan/en-262/install/install_the_uan_product_stream/">2.6.2</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-261" value="/docs-uan/en-261/install/install_the_uan_product_stream/">2.6.1</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-2511" value="/docs-uan/en-2511/install/install_the_uan_product_stream/">2.5.11</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-uan/en-271/'></a> > <a href='/docs-uan/en-271/install/'></a> > 
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#install-and-upgrade-framework">Install and Upgrade Framework</a>
      <ul>
        <li><a href="#iuf-resource-files">IUF Resource Files</a></li>
      </ul>
    </li>
    <li><a href="#iuf-stage-details-for-uan">IUF Stage Details for UAN</a>
      <ul>
        <li><a href="#process-media">process-media</a></li>
        <li><a href="#update-vcs-config">update-vcs-config</a></li>
        <li><a href="#update-cfs-config">update-cfs-config</a></li>
      </ul>
    </li>
    <li><a href="#uan-content-installed">UAN Content Installed</a>
      <ul>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#procedure-to-set-root-password-for-uanapplication-nodes">Procedure to Set Root Password For UAN/Application Nodes</a></li>
        <li><a href="#sle-hpc-image-for-application-nodes">SLE HPC Image for Application Nodes</a></li>
        <li><a href="#rpms">RPMs</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              
            </h1>
          

        


<h1 id="install-or-upgrade-uan">Install or Upgrade UAN</h1>
<h2 id="install-and-upgrade-framework">Install and Upgrade Framework</h2>
<p>The Install and Upgrade Framework (IUF) provides commands which install, upgrade, and deploy products on systems managed by CSM. IUF capabilities are described in detail in the <a href="https://cray-hpe.github.io/docs-csm/en-14/operations/iuf/iuf/">IUF section</a> of the <a href="https://cray-hpe.github.io/docs-csm/en-14/">Cray System Management Documentation</a>. The initial install and upgrade workflows described in the <a href="https://www.hpe.com/support/ex-S-8052">HPE Cray EX System Software Stack Installation and Upgrade Guide for CSM (S-8052)</a> detail when and how to use IUF with a new release of UAN or any other HPE Cray EX product.</p>
<p>This document <strong>does not</strong> replicate the install, upgrade, or deployment procedures detailed in the <a href="https://cray-hpe.github.io/docs-csm/en-14/operations/iuf/iuf/">IUF section</a> of the <a href="https://cray-hpe.github.io/docs-csm/en-14/">Cray System Management Documentation</a>. This document provides details regarding software and configuration content specific to UAN which may be needed when installing, upgrading, or deploying a UAN release. The <a href="https://cray-hpe.github.io/docs-csm/en-14/operations/iuf/iuf/">IUF section</a> of the <a href="https://cray-hpe.github.io/docs-csm/en-14/">Cray System Management Documentation</a> will indicate when sections of this document must be seen for detailed information.</p>
<p>IUF will perform the following tasks for a release of the HPE Cray Supercomputing UAN product software.</p>
<ul>
<li>IUF <code>process-media</code> stage:
<ul>
<li>Inventory and extract the UAN products in the media directory for use in subsequent stages</li>
</ul>
</li>
<li>IUF <code>pre-install-check</code> stage:
<ul>
<li>Perform pre-install readiness checks</li>
</ul>
</li>
<li>IUF <code>deliver-product</code> stage:
<ul>
<li>Uploads UAN configuration content to VCS</li>
<li>Uploads UAN information to the CSM product catalog</li>
<li>Uploads UAN content to Nexus repositories</li>
<li>Uploads the UAN Stock Kernel image to IMS</li>
</ul>
</li>
<li>IUF <code>update-vcs-config</code> stage:
<ul>
<li>Updates the VCS integration branch with new UAN configuration content</li>
</ul>
</li>
<li>IUF <code>update-cfs-config</code> stage:
<ul>
<li>Creates new CFS configurations with new UAN configuration content</li>
</ul>
</li>
<li>IUF <code>prepare-images</code> stage:
<ul>
<li>Creates updated UAN images based on COS with new UAN content</li>
</ul>
</li>
<li>IUF <code>managed-nodes-rollout</code> stage:
<ul>
<li>Boots UAN nodes with an image containing new UAN content</li>
</ul>
</li>
</ul>
<p>IUF uses a variety of CSM and SAT tools when performing these tasks. The <a href="https://cray-hpe.github.io/docs-csm/en-14/operations/iuf/iuf/">IUF section</a> of the <a href="https://cray-hpe.github.io/docs-csm/en-14/">Cray System Management Documentation</a> describes how to use these tools directly if it is desirable to use them instead of IUF.</p>
<h3 id="iuf-resource-files">IUF Resource Files</h3>
<p>IUF uses the following files to drive the install or upgrade of UAN. These files are provided by the <code>hpc-csm-software-recipe</code> VCS repository.</p>
<ul>
<li><code>product_vars.yaml</code> (<strong>Required</strong>)
<ul>
<li>Contains the list of products and versions to be installed together. It also contains the <code>working_branch</code> variables for the products. This file is in a directory under <code>/etc/cray/upgrade/csm/</code>. For example, <code>/etc/cray/upgrade/csm/admin</code>.</li>
<li>The path to this file is defined on the <code>iuf</code> command line using the IUF recipe vars (<code>-rv</code>) option.  For example, <code>-rv /etc/cray/upgrade/csm/admin</code>.</li>
</ul>
</li>
<li><code>site_vars.yaml</code> (<strong>Required</strong>)
<ul>
<li>This file allows the administrator to override values in <code>product_vars.yaml</code> and defines the site VCS branching strategy. It may be placed in any directory under <code>/etc/cray/upgrade/csm</code>.</li>
<li>The path to this file is defined on the <code>iuf</code> command line using the IUF site vars (<code>-sv</code>) option. For example, <code>-sv /etc/cray/upgrade/csm/admin/site_vars.yaml</code>.</li>
</ul>
</li>
<li><code>compute-and-uan-bootprep.yaml</code> (<strong>Required</strong>)
<ul>
<li>This file is typically installed in the <code>/etc/cray/upgrade/csm/bootprep</code> directory and defines variables for the following tasks:
<ul>
<li>Create a compute node image which will be configured for use on UAN</li>
<li>Create the UAN CFS Configuration</li>
<li>Create the UAN BOS session template</li>
</ul>
</li>
<li>This path to this file is defined on the <code>iuf</code> command line using the IUF bootprep-config-managed (<code>-bc</code>) options.  For example, <code>-bc /etc/cray/upgrade/csm/bootprep/compute-and-uan-bootprep.yaml</code>.</li>
</ul>
</li>
</ul>
<h2 id="iuf-stage-details-for-uan">IUF Stage Details for UAN</h2>
<p>This section describes any UAN details that an administrator must be aware of before executing IUF stages. Entries are prefixed with <strong>Information</strong> if no administrative action is required or <strong>Action</strong> if an administrator must perform tasks outside of IUF.</p>
<h3 id="process-media">process-media</h3>
<p><strong>Action</strong>: Before executing this stage, the administrator must ensure that the UAN product tar file is in a media directory under <code>/etc/cray/upgrade/csm/</code>. When more than one product is being installed, place all the product tar files in the same directory.</p>
<h3 id="update-vcs-config">update-vcs-config</h3>
<p><strong>Action</strong>: Before executing this stage, the administrator must ensure the IUF site variables file (see <code>iuf -sv SITE_VARS</code>) is updated to reflect site preferences, including the wanted VCS branching configuration. The <code>update-vcs-config</code> stage will use the branching configuration when modifying UAN branches in VCS.</p>
<h3 id="update-cfs-config">update-cfs-config</h3>
<p><strong>Action</strong>: Before executing this stage, any site-local UAN configuration changes must be made so that the following stages execute using the wanted UAN configuration values. See the <a href="/docs-uan/en-271/operations/basic_uan_configuration/">Basic UAN Configuration</a> section of this documentation for UAN configuration content details. The <a href="/docs-uan/en-271/installation_prereqs/prepare_for_uan_product_installation/">Prepare for UAN Product Installation</a> section is required for fresh installation scenarios.</p>
<h2 id="uan-content-installed">UAN Content Installed</h2>
<p>The following subsections describe most of the UAN content installed and configured on the system by IUF. The new version of UAN (2.6.XX) and its artifacts will be displayed in the CSM product catalog alongside any previously released version of UAN and its artifacts.</p>
<h3 id="configuration">Configuration</h3>
<p>UAN provides configuration content in the form of Ansible roles and plays. This content is uploaded to a VCS repository in a branch with a specific UAN version number. That release number, such as (2.6.XX) distinguishes it from any previously released UAN configuration content. This content is described in detail in the <a href="/docs-uan/en-271/operations/basic_uan_configuration/">Basic UAN Configuration</a> section.</p>
<p>For application nodes based on COS, the COS compute image is used as the base application node image and two COS CFS layers are required. The first COS CFS layer runs the <code>cos-application.yml</code> Ansible playbook and ensures that the COS content is applied as part of the image customization and node personalization processes. This COS CFS layer must precede the UAN CFS layer in the UAN CFS configuration. A second COS CFS layer running the Ansible playbook, <code>cos-application-after.yml</code>, runs after the UAN CFS layer of the UAN CFS configuration. This second COS CFS layer ensures that the application node initrd is rebuilt and that any customer-defined filesystems are configured.</p>
<p>Input files for <code>sat bootprep</code> are provided in the <code>hpc-csm-software-recipe</code> VCS repository and include COS components in the CFS configuration, node image, and BOS session template definitions. The <code>compute-and-uan-bootprep.yaml</code> input file is used for compute and application nodes.</p>
<h3 id="procedure-to-set-root-password-for-uanapplication-nodes">Procedure to Set Root Password For UAN/Application Nodes</h3>
<p>The following instructions describe how to set the root password for UAN/Application nodes.</p>
<ol>
<li>
<p>Obtain the HashiCorp Vault root token.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# kubectl get secrets -n vault cray-vault-unseal-keys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.data.vault-root}&#39;</span> | base64 -d; echo
</span></span></code></pre></div></li>
<li>
<p>Log into the HashiCorp Vault pod.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# kubectl exec -itn vault cray-vault-0 -c vault -- sh
</span></span></code></pre></div></li>
<li>
<p>After you are attached to the pod&rsquo;s shell, log into vault and read the <code>secret/uan</code> key by executing the following commands. If the secret is empty, &ldquo;No value found at secret/uan&rdquo; will be displayed.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pod# export VAULT_ADDR<span style="color:#f92672">=</span>http://cray-vault:8200
</span></span><span style="display:flex;"><span>pod# vault login
</span></span><span style="display:flex;"><span>pod# vault read secret/uan
</span></span></code></pre></div></li>
<li>
<p>If no value is found for this key, complete the following steps in another shell on the NCN management node.</p>
<p>a.  Generate the password HASH for the root user. Replace &lsquo;PASSWORD&rsquo; with a chosen root password.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# openssl passwd -6 -salt <span style="color:#66d9ef">$(</span>&lt; /dev/urandom tr -dc A-Z-a-z-0-9 | head -c4<span style="color:#66d9ef">)</span> PASSWORD
</span></span></code></pre></div><p>b.  Take the HASH value returned from the previous command and enter the following in the vault pod&rsquo;s shell. Instead of HASH, use the value returned from the previous step.  You must escape the HASH value with the single quote to preserve any special characters that are part of the HASH value. If you previously have exited the pod, repeat the previous Steps 1-3; there is no need to perform the vault read since the content is empty.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pod# vault write secret/uan root_password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;HASH&#39;</span>
</span></span></code></pre></div><p>c.  Verify that the new hash value is stored.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pod# vault read secret/uan
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>pod# exit
</span></span></code></pre></div></li>
<li>
<p><strong>Optional</strong> Write any uan_ldap sensitive data, such as the <code>ldap_default_authtok</code> value, to the HashiCorp Vault.</p>
<p>The vault login command will request a token. That token value is the output of the Step 1. The vault <code>read secret/uan_ldap</code> command verifies that the <code>uan_ldap</code> data was stored correctly. Any values stored here will be written to the UAN <code>/etc/sssd/sssd.conf</code> file in the <code>[domain]</code> section by CFS.</p>
<p>This example shows storing a value for <code>ldap_default_authtok</code>.  If more than one variable must be stored, they must be written in space separated <code>key=value</code> pairs on the same <code>vault write secret/uan_ldap</code> command line.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ncn-m001# kubectl exec -it -n vault cray-vault-0 -- sh
</span></span><span style="display:flex;"><span>export VAULT_ADDR<span style="color:#f92672">=</span>http://cray-vault:8200
</span></span><span style="display:flex;"><span>vault login
</span></span><span style="display:flex;"><span>vault write secret/uan_ldap ldap_default_authtok<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TOKEN&#39;</span>
</span></span><span style="display:flex;"><span>vault read secret/uan_ldap
</span></span></code></pre></div></li>
</ol>
<h3 id="sle-hpc-image-for-application-nodes">SLE HPC Image for Application Nodes</h3>
<p>The UAN product provides an Application Node image. This image is based on SUSE Linux Enterprise High Performance Computing 15 (SLE HPC 15) and uses a &ldquo;stock&rdquo; (that is, not customized for HPE Cray systems) kernel. Customers can use this image on Application nodes that do not require any COS compatibility as UAN does. Unlike the default UAN image, this Application Node image is not based on the COS image. However, like the UAN default image, it is uploaded to IMS as part of the installation process.</p>
<p>Customers must finish the installation or upgrade of the UAN product before booting an Application Node with SLE HPC 15 provided by that UAN product release. See <a href="/docs-uan/en-271/advanced/sles_image/">Booting an Application Node with a SLES Image (Technical Preview)</a> for more information about this image and instructions on deploying it to Application Nodes.</p>
<h3 id="rpms">RPMs</h3>
<p>UAN provides RPMs used on UAN nodes. The RPMs are uploaded to Nexus as part of the installation process.</p>
<p>The following Nexus raw repositories are created:</p>
<ul>
<li>uan-2.6.XX-sle-15sp4</li>
<li>uan-2.6.XX-sle-15sp3</li>
</ul>
<p>The following Nexus group repositories are created and reference the preceding Nexus raw repos.</p>
<ul>
<li>uan-2.6-sle-15sp4</li>
<li>uan-2.6-sle-15sp3</li>
</ul>
<p>The uan-2.6-sle-15sp4 and uan-2.6-sle-15sp3 Nexus group repositories are used when building UAN node images and are accessible on UAN nodes after boot.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-uan/js/clipboard.min.js?1705460687"></script>
    <script src="/docs-uan/js/perfect-scrollbar.min.js?1705460687"></script>
    <script src="/docs-uan/js/perfect-scrollbar.jquery.min.js?1705460687"></script>
    <script src="/docs-uan/js/jquery.sticky.js?1705460687"></script>
    <script src="/docs-uan/js/featherlight.min.js?1705460687"></script>
    <script src="/docs-uan/js/highlight.pack.js?1705460687"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-uan/js/modernizr.custom-3.6.0.js?1705460687"></script>
    <script src="/docs-uan/js/learn.js?1705460687"></script>
    <script src="/docs-uan/js/hugo-learn.js?1705460687"></script>
    
        
            <script src="/docs-uan/mermaid/mermaid.js?1705460687"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

